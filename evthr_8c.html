<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Libevhtp: evthr.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Libevhtp
   &#160;<span id="projectnumber">1.2.12-develop</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('evthr_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">evthr.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;sys/syscall.h&gt;</code><br />
<code>#include &lt;sys/ioctl.h&gt;</code><br />
<code>#include &lt;sys/queue.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;event2/event.h&gt;</code><br />
<code>#include &lt;event2/thread.h&gt;</code><br />
<code>#include &quot;<a class="el" href="evhtp-internal_8h_source.html">evhtp-internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="evthr_8h_source.html">evthr.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for evthr.c:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c__incl.png" border="0" usemap="#evthr_8c" alt=""/></div>
<map name="evthr_8c" id="evthr_8c">
<area shape="rect" id="node17" href="evhtp-internal_8h.html" title="evhtp&#45;internal.h" alt="" coords="1420,79,1534,104"/>
<area shape="rect" id="node18" href="evthr_8h.html" title="evthr.h" alt="" coords="1197,79,1258,104"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a369266c24eacffb87046522897a570d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a369266c24eacffb87046522897a570d5">_GNU_SOURCE</a></td></tr>
<tr class="separator:a369266c24eacffb87046522897a570d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad79b3cdd603d7af871fc459097209709"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#ad79b3cdd603d7af871fc459097209709">_evthr_read</a>(thr,  cmd,  sock)&#160;&#160;&#160;(recv(sock, cmd, sizeof(evthr_cmd_t), 0) == sizeof(evthr_cmd_t)) ? 1 : 0</td></tr>
<tr class="separator:ad79b3cdd603d7af871fc459097209709"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a938a8ac6e50cfed1a57b4ae6b3e5c372"><td class="memItemLeft" align="right" valign="top">typedef struct evthr_pool_slist&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a938a8ac6e50cfed1a57b4ae6b3e5c372">evthr_pool_slist_t</a></td></tr>
<tr class="separator:a938a8ac6e50cfed1a57b4ae6b3e5c372"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a697c96f7afc7a68bd78a518ea87e32bb"><td class="memItemLeft" align="right" valign="top">struct evthr_cmd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a697c96f7afc7a68bd78a518ea87e32bb">__attribute__</a> ((packed))</td></tr>
<tr class="separator:a697c96f7afc7a68bd78a518ea87e32bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24003859864206885f050bcf474bd55b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a24003859864206885f050bcf474bd55b">TAILQ_HEAD</a> (evthr_pool_slist, evthr)</td></tr>
<tr class="separator:a24003859864206885f050bcf474bd55b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ca698fd31b3842cf9336146d9b55d03"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a7ca698fd31b3842cf9336146d9b55d03">_evthr_read_cmd</a> (evutil_socket_t sock, short which, void *<a class="el" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>)</td></tr>
<tr class="separator:a7ca698fd31b3842cf9336146d9b55d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1023638ec5624538829a1e95b58960b5"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a1023638ec5624538829a1e95b58960b5">_evthr_loop</a> (void *<a class="el" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>)</td></tr>
<tr class="separator:a1023638ec5624538829a1e95b58960b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f09961614cd3efb20100bc540adc78e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1">evthr_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a3f09961614cd3efb20100bc540adc78e">evthr_defer</a> (evthr_t *thread, <a class="el" href="evthr_8h.html#aad251512bf9380b9572db267d5bd5532">evthr_cb</a> <a class="el" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>, void *arg)</td></tr>
<tr class="separator:a3f09961614cd3efb20100bc540adc78e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e59f1e4310133cd27bceeee9398854a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1">evthr_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a3e59f1e4310133cd27bceeee9398854a">evthr_stop</a> (evthr_t *thread)</td></tr>
<tr class="separator:a3e59f1e4310133cd27bceeee9398854a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46dff6afc6d6722688fd09c74add2ddd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="evthr_8h.html#ac1a9bb265b995e58237889446894e944">evbase_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a46dff6afc6d6722688fd09c74add2ddd">evthr_get_base</a> (evthr_t *thr)</td></tr>
<tr class="separator:a46dff6afc6d6722688fd09c74add2ddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ac55f7b6aa964581d18d36efb8dc76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a11ac55f7b6aa964581d18d36efb8dc76">evthr_set_aux</a> (evthr_t *thr, void *aux)</td></tr>
<tr class="separator:a11ac55f7b6aa964581d18d36efb8dc76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15c9c2860107ab242683af481b7b8164"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a15c9c2860107ab242683af481b7b8164">evthr_get_aux</a> (evthr_t *thr)</td></tr>
<tr class="separator:a15c9c2860107ab242683af481b7b8164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d171de75e5fd539ce14ba7e41793568"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568">evthr_set_initcb</a> (evthr_t *thr, <a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a> <a class="el" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>)</td></tr>
<tr class="separator:a8d171de75e5fd539ce14ba7e41793568"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebcc1d7184db421684a620758855de62"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#aebcc1d7184db421684a620758855de62">evthr_set_exitcb</a> (evthr_t *thr, <a class="el" href="evthr_8h.html#a04993ff177d1e6a5de673f7b3364722b">evthr_exit_cb</a> <a class="el" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>)</td></tr>
<tr class="separator:aebcc1d7184db421684a620758855de62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae16815aef6a84311c807965d7dfa4268"><td class="memItemLeft" align="right" valign="top">static evthr_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new</a> (<a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a> init_cb, <a class="el" href="evthr_8h.html#a04993ff177d1e6a5de673f7b3364722b">evthr_exit_cb</a> exit_cb, void *<a class="el" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>)</td></tr>
<tr class="separator:ae16815aef6a84311c807965d7dfa4268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca2eb31c3589281d2a9f5953ded143fa"><td class="memItemLeft" align="right" valign="top">evthr_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#aca2eb31c3589281d2a9f5953ded143fa">evhtr_new</a> (<a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a> init_cb, void *<a class="el" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>)</td></tr>
<tr class="separator:aca2eb31c3589281d2a9f5953ded143fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45db8d47201add94f3d05768d47ae987"><td class="memItemLeft" align="right" valign="top">evthr_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a45db8d47201add94f3d05768d47ae987">evthr_wexit_new</a> (<a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a> init_cb, <a class="el" href="evthr_8h.html#a04993ff177d1e6a5de673f7b3364722b">evthr_exit_cb</a> exit_cb, void *<a class="el" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>)</td></tr>
<tr class="separator:a45db8d47201add94f3d05768d47ae987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08fc36209f69a6bf58581c395ca22df0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a08fc36209f69a6bf58581c395ca22df0">evthr_start</a> (evthr_t *thread)</td></tr>
<tr class="separator:a08fc36209f69a6bf58581c395ca22df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a975c0504858edc68ca316a3efc9dde88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88">evthr_free</a> (evthr_t *thread)</td></tr>
<tr class="separator:a975c0504858edc68ca316a3efc9dde88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef64d9c2456f217908abf0166d0a8a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a4ef64d9c2456f217908abf0166d0a8a5">evthr_pool_free</a> (evthr_pool_t *pool)</td></tr>
<tr class="separator:a4ef64d9c2456f217908abf0166d0a8a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcb0f7fd6293a1051167157eeddf47d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1">evthr_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#afcb0f7fd6293a1051167157eeddf47d7">evthr_pool_stop</a> (evthr_pool_t *pool)</td></tr>
<tr class="separator:afcb0f7fd6293a1051167157eeddf47d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac097120e7644833b8b86891525464414"><td class="memItemLeft" align="right" valign="top"><a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1">evthr_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#ac097120e7644833b8b86891525464414">evthr_pool_defer</a> (evthr_pool_t *pool, <a class="el" href="evthr_8h.html#aad251512bf9380b9572db267d5bd5532">evthr_cb</a> <a class="el" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>, void *arg)</td></tr>
<tr class="separator:ac097120e7644833b8b86891525464414"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33070c7bdd9224ffec651c0dc34a8c6b"><td class="memItemLeft" align="right" valign="top">static evthr_pool_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b">_evthr_pool_new</a> (int nthreads, <a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a> init_cb, <a class="el" href="evthr_8h.html#a04993ff177d1e6a5de673f7b3364722b">evthr_exit_cb</a> exit_cb, void *shared)</td></tr>
<tr class="separator:a33070c7bdd9224ffec651c0dc34a8c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd4fcf040054e7e078ebd149a38c94d2"><td class="memItemLeft" align="right" valign="top">evthr_pool_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#abd4fcf040054e7e078ebd149a38c94d2">evthr_pool_new</a> (int nthreads, <a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a> init_cb, void *shared)</td></tr>
<tr class="separator:abd4fcf040054e7e078ebd149a38c94d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5094de037a6f5475154ad68374dfcfd"><td class="memItemLeft" align="right" valign="top">evthr_pool_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#ae5094de037a6f5475154ad68374dfcfd">evthr_pool_wexit_new</a> (int nthreads, <a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a> init_cb, <a class="el" href="evthr_8h.html#a04993ff177d1e6a5de673f7b3364722b">evthr_exit_cb</a> exit_cb, void *shared)</td></tr>
<tr class="separator:ae5094de037a6f5475154ad68374dfcfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbf9e15cc637731b1bdae6c9f77f202f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#afbf9e15cc637731b1bdae6c9f77f202f">evthr_pool_start</a> (evthr_pool_t *pool)</td></tr>
<tr class="separator:afbf9e15cc637731b1bdae6c9f77f202f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a219998cfb366307196d1013046d3f5d2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#a219998cfb366307196d1013046d3f5d2">stop</a></td></tr>
<tr class="separator:a219998cfb366307196d1013046d3f5d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add0eb34e0cef9e763462cf9080f9be0a"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a></td></tr>
<tr class="separator:add0eb34e0cef9e763462cf9080f9be0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeb82a619f6f2dba845cd9a862f33bfd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="evthr_8h.html#aad251512bf9380b9572db267d5bd5532">evthr_cb</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a></td></tr>
<tr class="separator:aaeb82a619f6f2dba845cd9a862f33bfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d119462c343c7239b4555c77dc393b"><td class="memItemLeft" align="right" valign="top">struct evthr_pool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="evthr_8c.html#af7d119462c343c7239b4555c77dc393b">__attribute__</a></td></tr>
<tr class="separator:af7d119462c343c7239b4555c77dc393b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a369266c24eacffb87046522897a570d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _GNU_SOURCE</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad79b3cdd603d7af871fc459097209709"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _evthr_read</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">thr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cmd, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sock&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(recv(sock, cmd, sizeof(evthr_cmd_t), 0) == sizeof(evthr_cmd_t)) ? 1 : 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="evthr_8c.html#a7ca698fd31b3842cf9336146d9b55d03">_evthr_read_cmd()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a938a8ac6e50cfed1a57b4ae6b3e5c372"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct evthr_pool_slist <a class="el" href="evthr_8c.html#a938a8ac6e50cfed1a57b4ae6b3e5c372">evthr_pool_slist_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a697c96f7afc7a68bd78a518ea87e32bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct evthr_cmd __attribute__ </td>
          <td>(</td>
          <td class="paramtype">(packed)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a24003859864206885f050bcf474bd55b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TAILQ_HEAD </td>
          <td>(</td>
          <td class="paramtype">evthr_pool_slist&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">evthr&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7ca698fd31b3842cf9336146d9b55d03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _evthr_read_cmd </td>
          <td>(</td>
          <td class="paramtype">evutil_socket_t&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>which</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#ad79b3cdd603d7af871fc459097209709">_evthr_read</a>, <a class="el" href="evhtp-internal_8h.html#a1c7eb8cd4bffec4c846b082c7783699f">evhtp_likely</a>, and <a class="el" href="evhtp-internal_8h.html#ae7aa70ee9350e7db0b825b794cc68387">evhtp_unlikely</a>.</p>

<p>Referenced by <a class="el" href="evthr_8c.html#a1023638ec5624538829a1e95b58960b5">_evthr_loop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                                                {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    evthr_t   * thread;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    evthr_cmd_t cmd;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">int</span>         stopped;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span> (!(thread = (evthr_t *)<a class="code" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>)) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    stopped = 0;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="evhtp-internal_8h.html#a1c7eb8cd4bffec4c846b082c7783699f">evhtp_likely</a>(<a class="code" href="evthr_8c.html#ad79b3cdd603d7af871fc459097209709">_evthr_read</a>(thread, &amp;cmd, sock) == 1)) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        stopped = cmd.stop;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="evhtp-internal_8h.html#a1c7eb8cd4bffec4c846b082c7783699f">evhtp_likely</a>(cmd.cb != NULL)) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            (cmd.cb)(thread, cmd.args, thread-&gt;arg);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="evhtp-internal_8h.html#ae7aa70ee9350e7db0b825b794cc68387">evhtp_unlikely</a>(stopped == 1)) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        event_base_loopbreak(thread-&gt;evbase);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;} <span class="comment">/* _evthr_read_cmd */</span></div>
<div class="ttc" id="evhtp-internal_8h_html_a1c7eb8cd4bffec4c846b082c7783699f"><div class="ttname"><a href="evhtp-internal_8h.html#a1c7eb8cd4bffec4c846b082c7783699f">evhtp_likely</a></div><div class="ttdeci">#define evhtp_likely(x)              </div><div class="ttdef"><b>Definition:</b> evhtp-internal.h:13</div></div>
<div class="ttc" id="evhtp-internal_8h_html_ae7aa70ee9350e7db0b825b794cc68387"><div class="ttname"><a href="evhtp-internal_8h.html#ae7aa70ee9350e7db0b825b794cc68387">evhtp_unlikely</a></div><div class="ttdeci">#define evhtp_unlikely(x)          </div><div class="ttdef"><b>Definition:</b> evhtp-internal.h:14</div></div>
<div class="ttc" id="evthr_8c_html_add0eb34e0cef9e763462cf9080f9be0a"><div class="ttname"><a href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a></div><div class="ttdeci">void * args</div><div class="ttdef"><b>Definition:</b> evthr.c:42</div></div>
<div class="ttc" id="evthr_8c_html_ad79b3cdd603d7af871fc459097209709"><div class="ttname"><a href="evthr_8c.html#ad79b3cdd603d7af871fc459097209709">_evthr_read</a></div><div class="ttdeci">#define _evthr_read(thr, cmd, sock)</div><div class="ttdef"><b>Definition:</b> evthr.c:65</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a7ca698fd31b3842cf9336146d9b55d03_icgraph.png" border="0" usemap="#evthr_8c_a7ca698fd31b3842cf9336146d9b55d03_icgraph" alt=""/></div>
<map name="evthr_8c_a7ca698fd31b3842cf9336146d9b55d03_icgraph" id="evthr_8c_a7ca698fd31b3842cf9336146d9b55d03_icgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a1023638ec5624538829a1e95b58960b5" title="_evthr_loop" alt="" coords="178,31,269,56"/>
<area shape="rect" id="node3" href="evthr_8h.html#a87bf5ae65b3a2fda4af06268df358c68" title="evthr_start" alt="" coords="317,31,402,56"/>
<area shape="rect" id="node4" href="evthr_8h.html#a389bf19f42d1ea31dd80912d08c63954" title="evthr_pool_start" alt="" coords="450,31,567,56"/>
<area shape="rect" id="node5" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="615,31,757,56"/>
<area shape="rect" id="node6" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="824,5,959,31"/>
<area shape="rect" id="node8" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="805,55,977,80"/>
<area shape="rect" id="node7" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1025,5,1076,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1023638ec5624538829a1e95b58960b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* _evthr_loop </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#a7ca698fd31b3842cf9336146d9b55d03">_evthr_read_cmd()</a>.</p>

<p>Referenced by <a class="el" href="evthr_8h.html#a87bf5ae65b3a2fda4af06268df358c68">evthr_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                         {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    evthr_t * thread;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (!(thread = (evthr_t *)<a class="code" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>)) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (thread == NULL || thread-&gt;thr == NULL) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        pthread_exit(NULL);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    thread-&gt;evbase = event_base_new();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    thread-&gt;event  = event_new(thread-&gt;evbase, thread-&gt;rdr,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                               EV_READ | EV_PERSIST, <a class="code" href="evthr_8c.html#a7ca698fd31b3842cf9336146d9b55d03">_evthr_read_cmd</a>, <a class="code" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    event_add(thread-&gt;event, NULL);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#ifdef EVTHR_SHARED_PIPE</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (thread-&gt;pool_rdr &gt; 0) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        thread-&gt;shared_pool_ev = event_new(thread-&gt;evbase, thread-&gt;pool_rdr,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                           EV_READ | EV_PERSIST, <a class="code" href="evthr_8c.html#a7ca698fd31b3842cf9336146d9b55d03">_evthr_read_cmd</a>, <a class="code" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        event_add(thread-&gt;shared_pool_ev, NULL);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    pthread_mutex_lock(&amp;thread-&gt;lock);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (thread-&gt;init_cb != NULL) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        (thread-&gt;init_cb)(thread, thread-&gt;arg);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    pthread_mutex_unlock(&amp;thread-&gt;lock);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    event_base_loop(thread-&gt;evbase, 0);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    pthread_mutex_lock(&amp;thread-&gt;lock);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (thread-&gt;exit_cb != NULL) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        (thread-&gt;exit_cb)(thread, thread-&gt;arg);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    pthread_mutex_unlock(&amp;thread-&gt;lock);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (thread-&gt;err == 1) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;FATAL ERROR!\n&quot;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    pthread_exit(NULL);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;} <span class="comment">/* _evthr_loop */</span></div>
<div class="ttc" id="evthr_8c_html_a7ca698fd31b3842cf9336146d9b55d03"><div class="ttname"><a href="evthr_8c.html#a7ca698fd31b3842cf9336146d9b55d03">_evthr_read_cmd</a></div><div class="ttdeci">static void _evthr_read_cmd(evutil_socket_t sock, short which, void *args)</div><div class="ttdef"><b>Definition:</b> evthr.c:69</div></div>
<div class="ttc" id="evthr_8c_html_add0eb34e0cef9e763462cf9080f9be0a"><div class="ttname"><a href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a></div><div class="ttdeci">void * args</div><div class="ttdef"><b>Definition:</b> evthr.c:42</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a1023638ec5624538829a1e95b58960b5_cgraph.png" border="0" usemap="#evthr_8c_a1023638ec5624538829a1e95b58960b5_cgraph" alt=""/></div>
<map name="evthr_8c_a1023638ec5624538829a1e95b58960b5_cgraph" id="evthr_8c_a1023638ec5624538829a1e95b58960b5_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a7ca698fd31b3842cf9336146d9b55d03" title="_evthr_read_cmd" alt="" coords="144,5,269,31"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a1023638ec5624538829a1e95b58960b5_icgraph.png" border="0" usemap="#evthr_8c_a1023638ec5624538829a1e95b58960b5_icgraph" alt=""/></div>
<map name="evthr_8c_a1023638ec5624538829a1e95b58960b5_icgraph" id="evthr_8c_a1023638ec5624538829a1e95b58960b5_icgraph">
<area shape="rect" id="node2" href="evthr_8h.html#a87bf5ae65b3a2fda4af06268df358c68" title="evthr_start" alt="" coords="144,31,229,56"/>
<area shape="rect" id="node3" href="evthr_8h.html#a389bf19f42d1ea31dd80912d08c63954" title="evthr_pool_start" alt="" coords="277,31,394,56"/>
<area shape="rect" id="node4" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="442,31,584,56"/>
<area shape="rect" id="node5" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="651,5,785,31"/>
<area shape="rect" id="node7" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="632,55,804,80"/>
<area shape="rect" id="node6" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="852,5,903,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3f09961614cd3efb20100bc540adc78e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1">evthr_res</a> evthr_defer </td>
          <td>(</td>
          <td class="paramtype">evthr_t *&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#aad251512bf9380b9572db267d5bd5532">evthr_cb</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>, <a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a>, and <a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656">EVTHR_RES_RETRY</a>.</p>

<p>Referenced by <a class="el" href="evthr_8h.html#ae4d07fdb8fa1213e5925e25ee7f38983">evthr_pool_defer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                                       {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    evthr_cmd_t cmd = {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        .cb   = <a class="code" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        .args = arg,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        .stop = 0</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    };</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (send(thread-&gt;wdr, &amp;cmd, <span class="keyword">sizeof</span>(cmd), 0) &lt;= 0) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656">EVTHR_RES_RETRY</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_aaeb82a619f6f2dba845cd9a862f33bfd"><div class="ttname"><a href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a></div><div class="ttdeci">evthr_cb cb</div><div class="ttdef"><b>Definition:</b> evthr.c:43</div></div>
<div class="ttc" id="evthr_8h_html_a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8"><div class="ttname"><a href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a></div><div class="ttdef"><b>Definition:</b> evthr.h:13</div></div>
<div class="ttc" id="evthr_8h_html_a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656"><div class="ttname"><a href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656">EVTHR_RES_RETRY</a></div><div class="ttdef"><b>Definition:</b> evthr.h:15</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a3f09961614cd3efb20100bc540adc78e_icgraph.png" border="0" usemap="#evthr_8c_a3f09961614cd3efb20100bc540adc78e_icgraph" alt=""/></div>
<map name="evthr_8c_a3f09961614cd3efb20100bc540adc78e_icgraph" id="evthr_8c_a3f09961614cd3efb20100bc540adc78e_icgraph">
<area shape="rect" id="node2" href="evthr_8h.html#ae4d07fdb8fa1213e5925e25ee7f38983" title="evthr_pool_defer" alt="" coords="142,5,264,31"/>
<area shape="rect" id="node3" href="evhtp_8c.html#a01058d2a190e93744fcd8b38d3eec6c5" title="_evhtp_accept_cb" alt="" coords="312,5,441,31"/>
<area shape="rect" id="node4" href="evhtp_8h.html#a8bc42cc848d9992f9a07bfeaa605b6b6" title="create the listener plus setup various options with an already&#45;bound socket. " alt="" coords="489,5,636,31"/>
<area shape="rect" id="node5" href="evhtp_8h.html#a9df8b5f5d1c042aa96bf0a9a1c241665" title="bind to an already allocated sockaddr. " alt="" coords="684,5,832,31"/>
<area shape="rect" id="node6" href="evhtp_8h.html#a72a5938d55bebe4271ad6b9b134a4979" title="bind to a socket, optionally with specific protocol support formatting. The addr can be defined as on..." alt="" coords="880,5,1012,31"/>
<area shape="rect" id="node7" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1060,5,1111,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3e59f1e4310133cd27bceeee9398854a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1">evthr_res</a> evthr_stop </td>
          <td>(</td>
          <td class="paramtype">evthr_t *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a>, and <a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656">EVTHR_RES_RETRY</a>.</p>

<p>Referenced by <a class="el" href="evthr_8h.html#a0349fcffea2ea94a8be2f23b1b4428fc">evthr_pool_stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                             {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    evthr_cmd_t cmd = {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        .cb   = NULL,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        .args = NULL,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        .stop = 1</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    };</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (send(thread-&gt;wdr, &amp;cmd, <span class="keyword">sizeof</span>(evthr_cmd_t), 0) &lt; 0) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656">EVTHR_RES_RETRY</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    pthread_join(*thread-&gt;thr, NULL);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="ttc" id="evthr_8h_html_a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8"><div class="ttname"><a href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a></div><div class="ttdef"><b>Definition:</b> evthr.h:13</div></div>
<div class="ttc" id="evthr_8h_html_a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656"><div class="ttname"><a href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656">EVTHR_RES_RETRY</a></div><div class="ttdef"><b>Definition:</b> evthr.h:15</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a3e59f1e4310133cd27bceeee9398854a_icgraph.png" border="0" usemap="#evthr_8c_a3e59f1e4310133cd27bceeee9398854a_icgraph" alt=""/></div>
<map name="evthr_8c_a3e59f1e4310133cd27bceeee9398854a_icgraph" id="evthr_8c_a3e59f1e4310133cd27bceeee9398854a_icgraph">
<area shape="rect" id="node2" href="evthr_8h.html#a0349fcffea2ea94a8be2f23b1b4428fc" title="evthr_pool_stop" alt="" coords="137,5,253,31"/>
<area shape="rect" id="node3" href="evhtp_8h.html#a847390a47422662b122bf95ecf7229e8" title="evhtp_free" alt="" coords="301,5,385,31"/>
<area shape="rect" id="node4" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="433,5,484,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a46dff6afc6d6722688fd09c74add2ddd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="evthr_8h.html#ac1a9bb265b995e58237889446894e944">evbase_t</a>* evthr_get_base </td>
          <td>(</td>
          <td class="paramtype">evthr_t *&#160;</td>
          <td class="paramname"><em>thr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="evhtp_8c.html#aa66c50a9faa2ae92643cae6d3aa8298e">_evhtp_run_in_thread()</a>, <a class="el" href="thread__design_8c.html#a7850b605551f990f0887eba05a2b09a6">app_init_thread()</a>, and <a class="el" href="test__proxy_8c.html#ae6d15c0e22799b0d202ba7bb6f9c9a8f">frontend_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                              {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">return</span> thr ? thr-&gt;evbase : NULL;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a46dff6afc6d6722688fd09c74add2ddd_icgraph.png" border="0" usemap="#evthr_8c_a46dff6afc6d6722688fd09c74add2ddd_icgraph" alt=""/></div>
<map name="evthr_8c_a46dff6afc6d6722688fd09c74add2ddd_icgraph" id="evthr_8c_a46dff6afc6d6722688fd09c74add2ddd_icgraph">
<area shape="rect" id="node2" href="evhtp_8c.html#aa66c50a9faa2ae92643cae6d3aa8298e" title="_evhtp_run_in_thread" alt="" coords="167,5,318,31"/>
<area shape="rect" id="node8" href="thread__design_8c.html#a7850b605551f990f0887eba05a2b09a6" title="app_init_thread" alt="" coords="185,55,299,80"/>
<area shape="rect" id="node10" href="test__proxy_8c.html#ae6d15c0e22799b0d202ba7bb6f9c9a8f" title="frontend_cb" alt="" coords="196,104,288,129"/>
<area shape="rect" id="node3" href="evhtp_8c.html#a01058d2a190e93744fcd8b38d3eec6c5" title="_evhtp_accept_cb" alt="" coords="366,5,495,31"/>
<area shape="rect" id="node4" href="evhtp_8h.html#a8bc42cc848d9992f9a07bfeaa605b6b6" title="create the listener plus setup various options with an already&#45;bound socket. " alt="" coords="543,5,690,31"/>
<area shape="rect" id="node5" href="evhtp_8h.html#a9df8b5f5d1c042aa96bf0a9a1c241665" title="bind to an already allocated sockaddr. " alt="" coords="738,5,886,31"/>
<area shape="rect" id="node6" href="evhtp_8h.html#a72a5938d55bebe4271ad6b9b134a4979" title="bind to a socket, optionally with specific protocol support formatting. The addr can be defined as on..." alt="" coords="934,5,1066,31"/>
<area shape="rect" id="node7" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1114,5,1165,31"/>
<area shape="rect" id="node9" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="405,55,456,80"/>
<area shape="rect" id="node11" href="test__proxy_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="405,104,456,129"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a11ac55f7b6aa964581d18d36efb8dc76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evthr_set_aux </td>
          <td>(</td>
          <td class="paramtype">evthr_t *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>aux</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="thread__design_8c.html#a7850b605551f990f0887eba05a2b09a6">app_init_thread()</a>, and <a class="el" href="test__proxy_8c.html#ae236dad0ef446c6fcd2c202bb4b0b4a8">init_thread_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                         {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (thr) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        thr-&gt;aux = aux;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a11ac55f7b6aa964581d18d36efb8dc76_icgraph.png" border="0" usemap="#evthr_8c_a11ac55f7b6aa964581d18d36efb8dc76_icgraph" alt=""/></div>
<map name="evthr_8c_a11ac55f7b6aa964581d18d36efb8dc76_icgraph" id="evthr_8c_a11ac55f7b6aa964581d18d36efb8dc76_icgraph">
<area shape="rect" id="node2" href="thread__design_8c.html#a7850b605551f990f0887eba05a2b09a6" title="app_init_thread" alt="" coords="158,5,272,31"/>
<area shape="rect" id="node4" href="test__proxy_8c.html#ae236dad0ef446c6fcd2c202bb4b0b4a8" title="init_thread_cb" alt="" coords="163,55,268,80"/>
<area shape="rect" id="node3" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="320,5,370,31"/>
<area shape="rect" id="node5" href="test__proxy_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="320,55,370,80"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a15c9c2860107ab242683af481b7b8164"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* evthr_get_aux </td>
          <td>(</td>
          <td class="paramtype">evthr_t *&#160;</td>
          <td class="paramname"><em>thr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d">app_process_request()</a>, and <a class="el" href="test__proxy_8c.html#ae6d15c0e22799b0d202ba7bb6f9c9a8f">frontend_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                             {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> thr ? thr-&gt;aux : NULL;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a15c9c2860107ab242683af481b7b8164_icgraph.png" border="0" usemap="#evthr_8c_a15c9c2860107ab242683af481b7b8164_icgraph" alt=""/></div>
<map name="evthr_8c_a15c9c2860107ab242683af481b7b8164_icgraph" id="evthr_8c_a15c9c2860107ab242683af481b7b8164_icgraph">
<area shape="rect" id="node2" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d" title="app_process_request" alt="" coords="159,5,309,31"/>
<area shape="rect" id="node4" href="test__proxy_8c.html#ae6d15c0e22799b0d202ba7bb6f9c9a8f" title="frontend_cb" alt="" coords="188,55,280,80"/>
<area shape="rect" id="node3" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="357,5,407,31"/>
<area shape="rect" id="node5" href="test__proxy_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="357,55,407,80"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8d171de75e5fd539ce14ba7e41793568"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int evthr_set_initcb </td>
          <td>(</td>
          <td class="paramtype">evthr_t *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>.</p>

<p>Referenced by <a class="el" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                                  {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (thr == NULL) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    thr-&gt;init_cb = <a class="code" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> 01;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_aaeb82a619f6f2dba845cd9a862f33bfd"><div class="ttname"><a href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a></div><div class="ttdeci">evthr_cb cb</div><div class="ttdef"><b>Definition:</b> evthr.c:43</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a8d171de75e5fd539ce14ba7e41793568_icgraph.png" border="0" usemap="#evthr_8c_a8d171de75e5fd539ce14ba7e41793568_icgraph" alt=""/></div>
<map name="evthr_8c_a8d171de75e5fd539ce14ba7e41793568_icgraph" id="evthr_8c_a8d171de75e5fd539ce14ba7e41793568_icgraph">
<area shape="rect" id="node2" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268" title="_evthr_new" alt="" coords="168,31,258,56"/>
<area shape="rect" id="node3" href="evthr_8c.html#aca2eb31c3589281d2a9f5953ded143fa" title="evhtr_new" alt="" coords="325,5,408,31"/>
<area shape="rect" id="node4" href="evthr_8h.html#a91d436ec63942d9f468cd6dcda43e2a0" title="evthr_wexit_new" alt="" coords="306,55,427,80"/>
<area shape="rect" id="node5" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b" title="_evthr_pool_new" alt="" coords="475,55,598,80"/>
<area shape="rect" id="node6" href="evthr_8h.html#ac53bda7b29c7cf9be0e1be4c57d11a3a" title="evthr_pool_new" alt="" coords="665,29,780,55"/>
<area shape="rect" id="node7" href="evthr_8h.html#a3765c8f4cc86e36ab6e54e12e1bedab9" title="evthr_pool_wexit_new" alt="" coords="646,79,799,104"/>
<area shape="rect" id="node8" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="847,79,989,104"/>
<area shape="rect" id="node9" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="1056,53,1191,79"/>
<area shape="rect" id="node11" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="1037,103,1210,128"/>
<area shape="rect" id="node10" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1258,53,1308,79"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aebcc1d7184db421684a620758855de62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int evthr_set_exitcb </td>
          <td>(</td>
          <td class="paramtype">evthr_t *&#160;</td>
          <td class="paramname"><em>thr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#a04993ff177d1e6a5de673f7b3364722b">evthr_exit_cb</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>.</p>

<p>Referenced by <a class="el" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                                  {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (thr == NULL) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    thr-&gt;exit_cb = <a class="code" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_aaeb82a619f6f2dba845cd9a862f33bfd"><div class="ttname"><a href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a></div><div class="ttdeci">evthr_cb cb</div><div class="ttdef"><b>Definition:</b> evthr.c:43</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_aebcc1d7184db421684a620758855de62_icgraph.png" border="0" usemap="#evthr_8c_aebcc1d7184db421684a620758855de62_icgraph" alt=""/></div>
<map name="evthr_8c_aebcc1d7184db421684a620758855de62_icgraph" id="evthr_8c_aebcc1d7184db421684a620758855de62_icgraph">
<area shape="rect" id="node2" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268" title="_evthr_new" alt="" coords="172,31,262,56"/>
<area shape="rect" id="node3" href="evthr_8c.html#aca2eb31c3589281d2a9f5953ded143fa" title="evhtr_new" alt="" coords="329,5,412,31"/>
<area shape="rect" id="node4" href="evthr_8h.html#a91d436ec63942d9f468cd6dcda43e2a0" title="evthr_wexit_new" alt="" coords="310,55,431,80"/>
<area shape="rect" id="node5" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b" title="_evthr_pool_new" alt="" coords="479,55,602,80"/>
<area shape="rect" id="node6" href="evthr_8h.html#ac53bda7b29c7cf9be0e1be4c57d11a3a" title="evthr_pool_new" alt="" coords="668,29,784,55"/>
<area shape="rect" id="node7" href="evthr_8h.html#a3765c8f4cc86e36ab6e54e12e1bedab9" title="evthr_pool_wexit_new" alt="" coords="650,79,803,104"/>
<area shape="rect" id="node8" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="851,79,993,104"/>
<area shape="rect" id="node9" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="1060,53,1195,79"/>
<area shape="rect" id="node11" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="1041,103,1214,128"/>
<area shape="rect" id="node10" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1262,53,1312,79"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae16815aef6a84311c807965d7dfa4268"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static evthr_t* _evthr_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a>&#160;</td>
          <td class="paramname"><em>init_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#a04993ff177d1e6a5de673f7b3364722b">evthr_exit_cb</a>&#160;</td>
          <td class="paramname"><em>exit_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>, <a class="el" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88">evthr_free()</a>, <a class="el" href="evthr_8c.html#aebcc1d7184db421684a620758855de62">evthr_set_exitcb()</a>, and <a class="el" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568">evthr_set_initcb()</a>.</p>

<p>Referenced by <a class="el" href="evthr_8c.html#aca2eb31c3589281d2a9f5953ded143fa">evhtr_new()</a>, and <a class="el" href="evthr_8h.html#a91d436ec63942d9f468cd6dcda43e2a0">evthr_wexit_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                                                      {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    evthr_t * thread;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">int</span>       fds[2];</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (evutil_socketpair(AF_UNIX, SOCK_STREAM, 0, fds) == -1) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    evutil_make_socket_nonblocking(fds[0]);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    evutil_make_socket_nonblocking(fds[1]);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> (!(thread = calloc(<span class="keyword">sizeof</span>(evthr_t), 1))) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    thread-&gt;thr = malloc(<span class="keyword">sizeof</span>(pthread_t));</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    thread-&gt;arg = <a class="code" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    thread-&gt;rdr = fds[0];</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    thread-&gt;wdr = fds[1];</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568">evthr_set_initcb</a>(thread, init_cb);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="evthr_8c.html#aebcc1d7184db421684a620758855de62">evthr_set_exitcb</a>(thread, exit_cb);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> (pthread_mutex_init(&amp;thread-&gt;lock, NULL)) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="code" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88">evthr_free</a>(thread);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> thread;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;} <span class="comment">/* evthr_new */</span></div>
<div class="ttc" id="evthr_8c_html_add0eb34e0cef9e763462cf9080f9be0a"><div class="ttname"><a href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a></div><div class="ttdeci">void * args</div><div class="ttdef"><b>Definition:</b> evthr.c:42</div></div>
<div class="ttc" id="evthr_8c_html_a975c0504858edc68ca316a3efc9dde88"><div class="ttname"><a href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88">evthr_free</a></div><div class="ttdeci">void evthr_free(evthr_t *thread)</div><div class="ttdef"><b>Definition:</b> evthr.c:268</div></div>
<div class="ttc" id="evthr_8c_html_aebcc1d7184db421684a620758855de62"><div class="ttname"><a href="evthr_8c.html#aebcc1d7184db421684a620758855de62">evthr_set_exitcb</a></div><div class="ttdeci">int evthr_set_exitcb(evthr_t *thr, evthr_exit_cb cb)</div><div class="ttdef"><b>Definition:</b> evthr.c:202</div></div>
<div class="ttc" id="evthr_8c_html_a8d171de75e5fd539ce14ba7e41793568"><div class="ttname"><a href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568">evthr_set_initcb</a></div><div class="ttdeci">int evthr_set_initcb(evthr_t *thr, evthr_init_cb cb)</div><div class="ttdef"><b>Definition:</b> evthr.c:191</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_ae16815aef6a84311c807965d7dfa4268_cgraph.png" border="0" usemap="#evthr_8c_ae16815aef6a84311c807965d7dfa4268_cgraph" alt=""/></div>
<map name="evthr_8c_ae16815aef6a84311c807965d7dfa4268_cgraph" id="evthr_8c_ae16815aef6a84311c807965d7dfa4268_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88" title="evthr_free" alt="" coords="162,5,243,31"/>
<area shape="rect" id="node3" href="evthr_8c.html#aebcc1d7184db421684a620758855de62" title="evthr_set_exitcb" alt="" coords="144,55,262,80"/>
<area shape="rect" id="node4" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568" title="evthr_set_initcb" alt="" coords="145,104,260,129"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_ae16815aef6a84311c807965d7dfa4268_icgraph.png" border="0" usemap="#evthr_8c_ae16815aef6a84311c807965d7dfa4268_icgraph" alt=""/></div>
<map name="evthr_8c_ae16815aef6a84311c807965d7dfa4268_icgraph" id="evthr_8c_ae16815aef6a84311c807965d7dfa4268_icgraph">
<area shape="rect" id="node2" href="evthr_8c.html#aca2eb31c3589281d2a9f5953ded143fa" title="evhtr_new" alt="" coords="162,5,245,31"/>
<area shape="rect" id="node3" href="evthr_8h.html#a91d436ec63942d9f468cd6dcda43e2a0" title="evthr_wexit_new" alt="" coords="144,55,264,80"/>
<area shape="rect" id="node4" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b" title="_evthr_pool_new" alt="" coords="312,55,435,80"/>
<area shape="rect" id="node5" href="evthr_8h.html#ac53bda7b29c7cf9be0e1be4c57d11a3a" title="evthr_pool_new" alt="" coords="502,29,618,55"/>
<area shape="rect" id="node6" href="evthr_8h.html#a3765c8f4cc86e36ab6e54e12e1bedab9" title="evthr_pool_wexit_new" alt="" coords="483,79,636,104"/>
<area shape="rect" id="node7" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="684,79,827,104"/>
<area shape="rect" id="node8" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="893,53,1028,79"/>
<area shape="rect" id="node10" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="875,103,1047,128"/>
<area shape="rect" id="node9" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1095,53,1145,79"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aca2eb31c3589281d2a9f5953ded143fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">evthr_t* evhtr_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a>&#160;</td>
          <td class="paramname"><em>init_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                              {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new</a>(init_cb, NULL, <a class="code" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_add0eb34e0cef9e763462cf9080f9be0a"><div class="ttname"><a href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a></div><div class="ttdeci">void * args</div><div class="ttdef"><b>Definition:</b> evthr.c:42</div></div>
<div class="ttc" id="evthr_8c_html_ae16815aef6a84311c807965d7dfa4268"><div class="ttname"><a href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new</a></div><div class="ttdeci">static evthr_t * _evthr_new(evthr_init_cb init_cb, evthr_exit_cb exit_cb, void *args)</div><div class="ttdef"><b>Definition:</b> evthr.c:213</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_aca2eb31c3589281d2a9f5953ded143fa_cgraph.png" border="0" usemap="#evthr_8c_aca2eb31c3589281d2a9f5953ded143fa_cgraph" alt=""/></div>
<map name="evthr_8c_aca2eb31c3589281d2a9f5953ded143fa_cgraph" id="evthr_8c_aca2eb31c3589281d2a9f5953ded143fa_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268" title="_evthr_new" alt="" coords="136,55,226,80"/>
<area shape="rect" id="node3" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88" title="evthr_free" alt="" coords="293,5,374,31"/>
<area shape="rect" id="node4" href="evthr_8c.html#aebcc1d7184db421684a620758855de62" title="evthr_set_exitcb" alt="" coords="274,55,393,80"/>
<area shape="rect" id="node5" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568" title="evthr_set_initcb" alt="" coords="276,104,391,129"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a45db8d47201add94f3d05768d47ae987"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">evthr_t* evthr_wexit_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a>&#160;</td>
          <td class="paramname"><em>init_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#a04993ff177d1e6a5de673f7b3364722b">evthr_exit_cb</a>&#160;</td>
          <td class="paramname"><em>exit_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new()</a>.</p>

<p>Referenced by <a class="el" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b">_evthr_pool_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                                                                           {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new</a>(init_cb, exit_cb, <a class="code" href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_add0eb34e0cef9e763462cf9080f9be0a"><div class="ttname"><a href="evthr_8c.html#add0eb34e0cef9e763462cf9080f9be0a">args</a></div><div class="ttdeci">void * args</div><div class="ttdef"><b>Definition:</b> evthr.c:42</div></div>
<div class="ttc" id="evthr_8c_html_ae16815aef6a84311c807965d7dfa4268"><div class="ttname"><a href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new</a></div><div class="ttdeci">static evthr_t * _evthr_new(evthr_init_cb init_cb, evthr_exit_cb exit_cb, void *args)</div><div class="ttdef"><b>Definition:</b> evthr.c:213</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a45db8d47201add94f3d05768d47ae987_cgraph.png" border="0" usemap="#evthr_8c_a45db8d47201add94f3d05768d47ae987_cgraph" alt=""/></div>
<map name="evthr_8c_a45db8d47201add94f3d05768d47ae987_cgraph" id="evthr_8c_a45db8d47201add94f3d05768d47ae987_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268" title="_evthr_new" alt="" coords="174,55,264,80"/>
<area shape="rect" id="node3" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88" title="evthr_free" alt="" coords="331,5,412,31"/>
<area shape="rect" id="node4" href="evthr_8c.html#aebcc1d7184db421684a620758855de62" title="evthr_set_exitcb" alt="" coords="312,55,431,80"/>
<area shape="rect" id="node5" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568" title="evthr_set_initcb" alt="" coords="314,104,429,129"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a45db8d47201add94f3d05768d47ae987_icgraph.png" border="0" usemap="#evthr_8c_a45db8d47201add94f3d05768d47ae987_icgraph" alt=""/></div>
<map name="evthr_8c_a45db8d47201add94f3d05768d47ae987_icgraph" id="evthr_8c_a45db8d47201add94f3d05768d47ae987_icgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b" title="_evthr_pool_new" alt="" coords="174,31,297,56"/>
<area shape="rect" id="node3" href="evthr_8h.html#ac53bda7b29c7cf9be0e1be4c57d11a3a" title="evthr_pool_new" alt="" coords="364,5,479,31"/>
<area shape="rect" id="node4" href="evthr_8h.html#a3765c8f4cc86e36ab6e54e12e1bedab9" title="evthr_pool_wexit_new" alt="" coords="345,55,498,80"/>
<area shape="rect" id="node5" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="546,55,688,80"/>
<area shape="rect" id="node6" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="755,29,890,55"/>
<area shape="rect" id="node8" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="736,79,909,104"/>
<area shape="rect" id="node7" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="957,29,1007,55"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a08fc36209f69a6bf58581c395ca22df0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int evthr_start </td>
          <td>(</td>
          <td class="paramtype">evthr_t *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#a1023638ec5624538829a1e95b58960b5">_evthr_loop()</a>.</p>

<p>Referenced by <a class="el" href="evthr_8h.html#a389bf19f42d1ea31dd80912d08c63954">evthr_pool_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                              {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (thread == NULL || thread-&gt;thr == NULL) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (pthread_create(thread-&gt;thr, NULL, <a class="code" href="evthr_8c.html#a1023638ec5624538829a1e95b58960b5">_evthr_loop</a>, (<span class="keywordtype">void</span> *)thread)) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_a1023638ec5624538829a1e95b58960b5"><div class="ttname"><a href="evthr_8c.html#a1023638ec5624538829a1e95b58960b5">_evthr_loop</a></div><div class="ttdeci">static void * _evthr_loop(void *args)</div><div class="ttdef"><b>Definition:</b> evthr.c:96</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a08fc36209f69a6bf58581c395ca22df0_cgraph.png" border="0" usemap="#evthr_8c_a08fc36209f69a6bf58581c395ca22df0_cgraph" alt=""/></div>
<map name="evthr_8c_a08fc36209f69a6bf58581c395ca22df0_cgraph" id="evthr_8c_a08fc36209f69a6bf58581c395ca22df0_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a1023638ec5624538829a1e95b58960b5" title="_evthr_loop" alt="" coords="138,5,229,31"/>
<area shape="rect" id="node3" href="evthr_8c.html#a7ca698fd31b3842cf9336146d9b55d03" title="_evthr_read_cmd" alt="" coords="277,5,402,31"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a08fc36209f69a6bf58581c395ca22df0_icgraph.png" border="0" usemap="#evthr_8c_a08fc36209f69a6bf58581c395ca22df0_icgraph" alt=""/></div>
<map name="evthr_8c_a08fc36209f69a6bf58581c395ca22df0_icgraph" id="evthr_8c_a08fc36209f69a6bf58581c395ca22df0_icgraph">
<area shape="rect" id="node2" href="evthr_8h.html#a389bf19f42d1ea31dd80912d08c63954" title="evthr_pool_start" alt="" coords="138,31,255,56"/>
<area shape="rect" id="node3" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="303,31,445,56"/>
<area shape="rect" id="node4" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="512,5,646,31"/>
<area shape="rect" id="node6" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="493,55,665,80"/>
<area shape="rect" id="node5" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="713,5,764,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a975c0504858edc68ca316a3efc9dde88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evthr_free </td>
          <td>(</td>
          <td class="paramtype">evthr_t *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new()</a>, and <a class="el" href="evthr_8h.html#a95c29e65a716ac2539a4e8f8304c1e58">evthr_pool_free()</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                             {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> (thread == NULL) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (thread-&gt;rdr &gt; 0) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        close(thread-&gt;rdr);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (thread-&gt;wdr &gt; 0) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        close(thread-&gt;wdr);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (thread-&gt;thr) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        free(thread-&gt;thr);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (thread-&gt;event) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        event_free(thread-&gt;event);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (thread-&gt;evbase) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        event_base_free(thread-&gt;evbase);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    free(thread);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;} <span class="comment">/* evthr_free */</span></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a975c0504858edc68ca316a3efc9dde88_icgraph.png" border="0" usemap="#evthr_8c_a975c0504858edc68ca316a3efc9dde88_icgraph" alt=""/></div>
<map name="evthr_8c_a975c0504858edc68ca316a3efc9dde88_icgraph" id="evthr_8c_a975c0504858edc68ca316a3efc9dde88_icgraph">
<area shape="rect" id="node2" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268" title="_evthr_new" alt="" coords="135,55,225,80"/>
<area shape="rect" id="node12" href="evthr_8h.html#a95c29e65a716ac2539a4e8f8304c1e58" title="evthr_pool_free" alt="" coords="276,105,390,131"/>
<area shape="rect" id="node3" href="evthr_8c.html#aca2eb31c3589281d2a9f5953ded143fa" title="evhtr_new" alt="" coords="292,5,375,31"/>
<area shape="rect" id="node4" href="evthr_8h.html#a91d436ec63942d9f468cd6dcda43e2a0" title="evthr_wexit_new" alt="" coords="273,55,394,80"/>
<area shape="rect" id="node5" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b" title="_evthr_pool_new" alt="" coords="442,55,564,80"/>
<area shape="rect" id="node6" href="evthr_8h.html#ac53bda7b29c7cf9be0e1be4c57d11a3a" title="evthr_pool_new" alt="" coords="631,5,747,31"/>
<area shape="rect" id="node7" href="evthr_8h.html#a3765c8f4cc86e36ab6e54e12e1bedab9" title="evthr_pool_wexit_new" alt="" coords="612,55,766,80"/>
<area shape="rect" id="node8" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="814,55,956,80"/>
<area shape="rect" id="node9" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="1023,5,1158,31"/>
<area shape="rect" id="node11" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="1004,55,1176,80"/>
<area shape="rect" id="node10" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="1224,56,1275,81"/>
<area shape="rect" id="node13" href="evhtp_8h.html#a847390a47422662b122bf95ecf7229e8" title="evhtp_free" alt="" coords="843,105,927,131"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4ef64d9c2456f217908abf0166d0a8a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void evthr_pool_free </td>
          <td>(</td>
          <td class="paramtype">evthr_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88">evthr_free()</a>, and <a class="el" href="evhtp-internal_8h.html#a6a36cc8868ae46d6db5ef3888636bb94">TAILQ_FOREACH_SAFE</a>.</p>

<p>Referenced by <a class="el" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b">_evthr_pool_new()</a>, and <a class="el" href="evhtp_8h.html#a847390a47422662b122bf95ecf7229e8">evhtp_free()</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                     {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    evthr_t * thread;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    evthr_t * save;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (pool == NULL) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="evhtp-internal_8h.html#a6a36cc8868ae46d6db5ef3888636bb94">TAILQ_FOREACH_SAFE</a>(thread, &amp;pool-&gt;threads, next, save) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        TAILQ_REMOVE(&amp;pool-&gt;threads, thread, next);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <a class="code" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88">evthr_free</a>(thread);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    free(pool);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_a975c0504858edc68ca316a3efc9dde88"><div class="ttname"><a href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88">evthr_free</a></div><div class="ttdeci">void evthr_free(evthr_t *thread)</div><div class="ttdef"><b>Definition:</b> evthr.c:268</div></div>
<div class="ttc" id="evhtp-internal_8h_html_a6a36cc8868ae46d6db5ef3888636bb94"><div class="ttname"><a href="evhtp-internal_8h.html#a6a36cc8868ae46d6db5ef3888636bb94">TAILQ_FOREACH_SAFE</a></div><div class="ttdeci">#define TAILQ_FOREACH_SAFE(var, head, field, tvar)            </div><div class="ttdef"><b>Definition:</b> evhtp-internal.h:18</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a4ef64d9c2456f217908abf0166d0a8a5_cgraph.png" border="0" usemap="#evthr_8c_a4ef64d9c2456f217908abf0166d0a8a5_cgraph" alt=""/></div>
<map name="evthr_8c_a4ef64d9c2456f217908abf0166d0a8a5_cgraph" id="evthr_8c_a4ef64d9c2456f217908abf0166d0a8a5_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88" title="evthr_free" alt="" coords="167,5,249,31"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a4ef64d9c2456f217908abf0166d0a8a5_icgraph.png" border="0" usemap="#evthr_8c_a4ef64d9c2456f217908abf0166d0a8a5_icgraph" alt=""/></div>
<map name="evthr_8c_a4ef64d9c2456f217908abf0166d0a8a5_icgraph" id="evthr_8c_a4ef64d9c2456f217908abf0166d0a8a5_icgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b" title="_evthr_pool_new" alt="" coords="167,55,290,80"/>
<area shape="rect" id="node9" href="evhtp_8h.html#a847390a47422662b122bf95ecf7229e8" title="evhtp_free" alt="" coords="568,105,653,131"/>
<area shape="rect" id="node3" href="evthr_8h.html#ac53bda7b29c7cf9be0e1be4c57d11a3a" title="evthr_pool_new" alt="" coords="357,5,473,31"/>
<area shape="rect" id="node4" href="evthr_8h.html#a3765c8f4cc86e36ab6e54e12e1bedab9" title="evthr_pool_wexit_new" alt="" coords="338,55,491,80"/>
<area shape="rect" id="node5" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="539,55,682,80"/>
<area shape="rect" id="node6" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="749,5,883,31"/>
<area shape="rect" id="node8" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="730,55,902,80"/>
<area shape="rect" id="node7" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="950,56,1000,81"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afcb0f7fd6293a1051167157eeddf47d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1">evthr_res</a> evthr_pool_stop </td>
          <td>(</td>
          <td class="paramtype">evthr_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a3a7c57b1a41de5037297b4aeb5ccb4d9">EVTHR_RES_FATAL</a>, <a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a>, <a class="el" href="evthr_8c.html#a3e59f1e4310133cd27bceeee9398854a">evthr_stop()</a>, and <a class="el" href="evhtp-internal_8h.html#a6a36cc8868ae46d6db5ef3888636bb94">TAILQ_FOREACH_SAFE</a>.</p>

<p>Referenced by <a class="el" href="evhtp_8h.html#a847390a47422662b122bf95ecf7229e8">evhtp_free()</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                     {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    evthr_t * thr;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    evthr_t * save;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (pool == NULL) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a3a7c57b1a41de5037297b4aeb5ccb4d9">EVTHR_RES_FATAL</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="evhtp-internal_8h.html#a6a36cc8868ae46d6db5ef3888636bb94">TAILQ_FOREACH_SAFE</a>(thr, &amp;pool-&gt;threads, next, save) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="evthr_8c.html#a3e59f1e4310133cd27bceeee9398854a">evthr_stop</a>(thr);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_a3e59f1e4310133cd27bceeee9398854a"><div class="ttname"><a href="evthr_8c.html#a3e59f1e4310133cd27bceeee9398854a">evthr_stop</a></div><div class="ttdeci">evthr_res evthr_stop(evthr_t *thread)</div><div class="ttdef"><b>Definition:</b> evthr.c:158</div></div>
<div class="ttc" id="evthr_8h_html_a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8"><div class="ttname"><a href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a></div><div class="ttdef"><b>Definition:</b> evthr.h:13</div></div>
<div class="ttc" id="evthr_8h_html_a9ea30835e60d0e58c66bb0772c749bf1a3a7c57b1a41de5037297b4aeb5ccb4d9"><div class="ttname"><a href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a3a7c57b1a41de5037297b4aeb5ccb4d9">EVTHR_RES_FATAL</a></div><div class="ttdef"><b>Definition:</b> evthr.h:17</div></div>
<div class="ttc" id="evhtp-internal_8h_html_a6a36cc8868ae46d6db5ef3888636bb94"><div class="ttname"><a href="evhtp-internal_8h.html#a6a36cc8868ae46d6db5ef3888636bb94">TAILQ_FOREACH_SAFE</a></div><div class="ttdeci">#define TAILQ_FOREACH_SAFE(var, head, field, tvar)            </div><div class="ttdef"><b>Definition:</b> evhtp-internal.h:18</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_afcb0f7fd6293a1051167157eeddf47d7_cgraph.png" border="0" usemap="#evthr_8c_afcb0f7fd6293a1051167157eeddf47d7_cgraph" alt=""/></div>
<map name="evthr_8c_afcb0f7fd6293a1051167157eeddf47d7_cgraph" id="evthr_8c_afcb0f7fd6293a1051167157eeddf47d7_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a3e59f1e4310133cd27bceeee9398854a" title="evthr_stop" alt="" coords="170,5,253,31"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_afcb0f7fd6293a1051167157eeddf47d7_icgraph.png" border="0" usemap="#evthr_8c_afcb0f7fd6293a1051167157eeddf47d7_icgraph" alt=""/></div>
<map name="evthr_8c_afcb0f7fd6293a1051167157eeddf47d7_icgraph" id="evthr_8c_afcb0f7fd6293a1051167157eeddf47d7_icgraph">
<area shape="rect" id="node2" href="evhtp_8h.html#a847390a47422662b122bf95ecf7229e8" title="evhtp_free" alt="" coords="170,5,254,31"/>
<area shape="rect" id="node3" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="302,5,352,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac097120e7644833b8b86891525464414"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1">evthr_res</a> evthr_pool_defer </td>
          <td>(</td>
          <td class="paramtype">evthr_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#aad251512bf9380b9572db267d5bd5532">evthr_cb</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>, <a class="el" href="evhtp-internal_8h.html#ae7aa70ee9350e7db0b825b794cc68387">evhtp_unlikely</a>, <a class="el" href="evthr_8c.html#a3f09961614cd3efb20100bc540adc78e">evthr_defer()</a>, <a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a3a7c57b1a41de5037297b4aeb5ccb4d9">EVTHR_RES_FATAL</a>, <a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a4bcc3f7aef7bec82634d217110d085cb">EVTHR_RES_NOCB</a>, <a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a>, and <a class="el" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656">EVTHR_RES_RETRY</a>.</p>

<p>Referenced by <a class="el" href="evhtp_8c.html#a01058d2a190e93744fcd8b38d3eec6c5">_evhtp_accept_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                                               {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">#ifdef EVTHR_SHARED_PIPE</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    evthr_cmd_t cmd = {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        .cb   = <a class="code" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        .args = arg,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        .stop = 0</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    };</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="evhtp-internal_8h.html#ae7aa70ee9350e7db0b825b794cc68387">evhtp_unlikely</a>(send(pool-&gt;wdr, &amp;cmd, <span class="keyword">sizeof</span>(cmd), 0) == -1)) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656">EVTHR_RES_RETRY</a>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    evthr_t * thr = NULL;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (pool == NULL) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a3a7c57b1a41de5037297b4aeb5ccb4d9">EVTHR_RES_FATAL</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a> == NULL) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a4bcc3f7aef7bec82634d217110d085cb">EVTHR_RES_NOCB</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    thr = TAILQ_FIRST(&amp;pool-&gt;threads);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    TAILQ_REMOVE(&amp;pool-&gt;threads, thr, next);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    TAILQ_INSERT_TAIL(&amp;pool-&gt;threads, thr, next);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="evthr_8c.html#a3f09961614cd3efb20100bc540adc78e">evthr_defer</a>(thr, <a class="code" href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a>, arg);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;} <span class="comment">/* evthr_pool_defer */</span></div>
<div class="ttc" id="evhtp-internal_8h_html_ae7aa70ee9350e7db0b825b794cc68387"><div class="ttname"><a href="evhtp-internal_8h.html#ae7aa70ee9350e7db0b825b794cc68387">evhtp_unlikely</a></div><div class="ttdeci">#define evhtp_unlikely(x)          </div><div class="ttdef"><b>Definition:</b> evhtp-internal.h:14</div></div>
<div class="ttc" id="evthr_8h_html_a9ea30835e60d0e58c66bb0772c749bf1a4bcc3f7aef7bec82634d217110d085cb"><div class="ttname"><a href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a4bcc3f7aef7bec82634d217110d085cb">EVTHR_RES_NOCB</a></div><div class="ttdef"><b>Definition:</b> evthr.h:16</div></div>
<div class="ttc" id="evthr_8c_html_aaeb82a619f6f2dba845cd9a862f33bfd"><div class="ttname"><a href="evthr_8c.html#aaeb82a619f6f2dba845cd9a862f33bfd">cb</a></div><div class="ttdeci">evthr_cb cb</div><div class="ttdef"><b>Definition:</b> evthr.c:43</div></div>
<div class="ttc" id="evthr_8h_html_a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8"><div class="ttname"><a href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a98794f354b6ddad48687d383579f02b8">EVTHR_RES_OK</a></div><div class="ttdef"><b>Definition:</b> evthr.h:13</div></div>
<div class="ttc" id="evthr_8h_html_a9ea30835e60d0e58c66bb0772c749bf1a3a7c57b1a41de5037297b4aeb5ccb4d9"><div class="ttname"><a href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a3a7c57b1a41de5037297b4aeb5ccb4d9">EVTHR_RES_FATAL</a></div><div class="ttdef"><b>Definition:</b> evthr.h:17</div></div>
<div class="ttc" id="evthr_8h_html_a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656"><div class="ttname"><a href="evthr_8h.html#a9ea30835e60d0e58c66bb0772c749bf1a519314fdfd257c928d354cf373350656">EVTHR_RES_RETRY</a></div><div class="ttdef"><b>Definition:</b> evthr.h:15</div></div>
<div class="ttc" id="evthr_8c_html_a3f09961614cd3efb20100bc540adc78e"><div class="ttname"><a href="evthr_8c.html#a3f09961614cd3efb20100bc540adc78e">evthr_defer</a></div><div class="ttdeci">evthr_res evthr_defer(evthr_t *thread, evthr_cb cb, void *arg)</div><div class="ttdef"><b>Definition:</b> evthr.c:143</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_ac097120e7644833b8b86891525464414_cgraph.png" border="0" usemap="#evthr_8c_ac097120e7644833b8b86891525464414_cgraph" alt=""/></div>
<map name="evthr_8c_ac097120e7644833b8b86891525464414_cgraph" id="evthr_8c_ac097120e7644833b8b86891525464414_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a3f09961614cd3efb20100bc540adc78e" title="evthr_defer" alt="" coords="175,5,264,31"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_ac097120e7644833b8b86891525464414_icgraph.png" border="0" usemap="#evthr_8c_ac097120e7644833b8b86891525464414_icgraph" alt=""/></div>
<map name="evthr_8c_ac097120e7644833b8b86891525464414_icgraph" id="evthr_8c_ac097120e7644833b8b86891525464414_icgraph">
<area shape="rect" id="node2" href="evhtp_8c.html#a01058d2a190e93744fcd8b38d3eec6c5" title="_evhtp_accept_cb" alt="" coords="175,5,304,31"/>
<area shape="rect" id="node3" href="evhtp_8h.html#a8bc42cc848d9992f9a07bfeaa605b6b6" title="create the listener plus setup various options with an already&#45;bound socket. " alt="" coords="352,5,499,31"/>
<area shape="rect" id="node4" href="evhtp_8h.html#a9df8b5f5d1c042aa96bf0a9a1c241665" title="bind to an already allocated sockaddr. " alt="" coords="547,5,695,31"/>
<area shape="rect" id="node5" href="evhtp_8h.html#a72a5938d55bebe4271ad6b9b134a4979" title="bind to a socket, optionally with specific protocol support formatting. The addr can be defined as on..." alt="" coords="743,5,876,31"/>
<area shape="rect" id="node6" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="924,5,974,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a33070c7bdd9224ffec651c0dc34a8c6b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static evthr_pool_t* _evthr_pool_new </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nthreads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a>&#160;</td>
          <td class="paramname"><em>init_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#a04993ff177d1e6a5de673f7b3364722b">evthr_exit_cb</a>&#160;</td>
          <td class="paramname"><em>exit_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>shared</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#a4ef64d9c2456f217908abf0166d0a8a5">evthr_pool_free()</a>, and <a class="el" href="evthr_8c.html#a45db8d47201add94f3d05768d47ae987">evthr_wexit_new()</a>.</p>

<p>Referenced by <a class="el" href="evthr_8h.html#ac53bda7b29c7cf9be0e1be4c57d11a3a">evthr_pool_new()</a>, and <a class="el" href="evthr_8h.html#a3765c8f4cc86e36ab6e54e12e1bedab9">evthr_pool_wexit_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                                      {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    evthr_pool_t * pool;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordtype">int</span>            i;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#ifdef EVTHR_SHARED_PIPE</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordtype">int</span> fds[2];</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (nthreads == 0) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (!(pool = calloc(<span class="keyword">sizeof</span>(evthr_pool_t), 1))) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    pool-&gt;nthreads = nthreads;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    TAILQ_INIT(&amp;pool-&gt;threads);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">#ifdef EVTHR_SHARED_PIPE</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span> (evutil_socketpair(AF_UNIX, SOCK_DGRAM, 0, fds) == -1) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    evutil_make_socket_nonblocking(fds[0]);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    evutil_make_socket_nonblocking(fds[1]);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    pool-&gt;rdr = fds[0];</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    pool-&gt;wdr = fds[1];</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; nthreads; i++) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        evthr_t * thread;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">if</span> (!(thread = <a class="code" href="evthr_8c.html#a45db8d47201add94f3d05768d47ae987">evthr_wexit_new</a>(init_cb, exit_cb, shared))) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <a class="code" href="evthr_8c.html#a4ef64d9c2456f217908abf0166d0a8a5">evthr_pool_free</a>(pool);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="preprocessor">#ifdef EVTHR_SHARED_PIPE</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        thread-&gt;pool_rdr = fds[0];</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        TAILQ_INSERT_TAIL(&amp;pool-&gt;threads, thread, next);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> pool;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;} <span class="comment">/* _evthr_pool_new */</span></div>
<div class="ttc" id="evthr_8c_html_a45db8d47201add94f3d05768d47ae987"><div class="ttname"><a href="evthr_8c.html#a45db8d47201add94f3d05768d47ae987">evthr_wexit_new</a></div><div class="ttdeci">evthr_t * evthr_wexit_new(evthr_init_cb init_cb, evthr_exit_cb exit_cb, void *args)</div><div class="ttdef"><b>Definition:</b> evthr.c:250</div></div>
<div class="ttc" id="evthr_8c_html_a4ef64d9c2456f217908abf0166d0a8a5"><div class="ttname"><a href="evthr_8c.html#a4ef64d9c2456f217908abf0166d0a8a5">evthr_pool_free</a></div><div class="ttdeci">void evthr_pool_free(evthr_pool_t *pool)</div><div class="ttdef"><b>Definition:</b> evthr.c:297</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a33070c7bdd9224ffec651c0dc34a8c6b_cgraph.png" border="0" usemap="#evthr_8c_a33070c7bdd9224ffec651c0dc34a8c6b_cgraph" alt=""/></div>
<map name="evthr_8c_a33070c7bdd9224ffec651c0dc34a8c6b_cgraph" id="evthr_8c_a33070c7bdd9224ffec651c0dc34a8c6b_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a4ef64d9c2456f217908abf0166d0a8a5" title="evthr_pool_free" alt="" coords="345,5,459,31"/>
<area shape="rect" id="node4" href="evthr_8c.html#a45db8d47201add94f3d05768d47ae987" title="evthr_wexit_new" alt="" coords="176,56,297,81"/>
<area shape="rect" id="node3" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88" title="evthr_free" alt="" coords="525,5,607,31"/>
<area shape="rect" id="node5" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268" title="_evthr_new" alt="" coords="357,56,447,81"/>
<area shape="rect" id="node6" href="evthr_8c.html#aebcc1d7184db421684a620758855de62" title="evthr_set_exitcb" alt="" coords="507,55,625,80"/>
<area shape="rect" id="node7" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568" title="evthr_set_initcb" alt="" coords="509,104,623,129"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_a33070c7bdd9224ffec651c0dc34a8c6b_icgraph.png" border="0" usemap="#evthr_8c_a33070c7bdd9224ffec651c0dc34a8c6b_icgraph" alt=""/></div>
<map name="evthr_8c_a33070c7bdd9224ffec651c0dc34a8c6b_icgraph" id="evthr_8c_a33070c7bdd9224ffec651c0dc34a8c6b_icgraph">
<area shape="rect" id="node2" href="evthr_8h.html#ac53bda7b29c7cf9be0e1be4c57d11a3a" title="evthr_pool_new" alt="" coords="195,5,311,31"/>
<area shape="rect" id="node3" href="evthr_8h.html#a3765c8f4cc86e36ab6e54e12e1bedab9" title="evthr_pool_wexit_new" alt="" coords="176,55,329,80"/>
<area shape="rect" id="node4" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="377,55,520,80"/>
<area shape="rect" id="node5" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="587,29,721,55"/>
<area shape="rect" id="node7" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="568,79,740,104"/>
<area shape="rect" id="node6" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="788,29,838,55"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abd4fcf040054e7e078ebd149a38c94d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">evthr_pool_t* evthr_pool_new </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nthreads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a>&#160;</td>
          <td class="paramname"><em>init_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>shared</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b">_evthr_pool_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                                                                   {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b">_evthr_pool_new</a>(nthreads, init_cb, NULL, shared);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_a33070c7bdd9224ffec651c0dc34a8c6b"><div class="ttname"><a href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b">_evthr_pool_new</a></div><div class="ttdeci">static evthr_pool_t * _evthr_pool_new(int nthreads, evthr_init_cb init_cb, evthr_exit_cb exit_cb, void *shared)</div><div class="ttdef"><b>Definition:</b> evthr.c:366</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_abd4fcf040054e7e078ebd149a38c94d2_cgraph.png" border="0" usemap="#evthr_8c_abd4fcf040054e7e078ebd149a38c94d2_cgraph" alt=""/></div>
<map name="evthr_8c_abd4fcf040054e7e078ebd149a38c94d2_cgraph" id="evthr_8c_abd4fcf040054e7e078ebd149a38c94d2_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b" title="_evthr_pool_new" alt="" coords="169,31,292,56"/>
<area shape="rect" id="node3" href="evthr_8c.html#a4ef64d9c2456f217908abf0166d0a8a5" title="evthr_pool_free" alt="" coords="508,5,622,31"/>
<area shape="rect" id="node5" href="evthr_8c.html#a45db8d47201add94f3d05768d47ae987" title="evthr_wexit_new" alt="" coords="340,56,460,81"/>
<area shape="rect" id="node4" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88" title="evthr_free" alt="" coords="689,5,770,31"/>
<area shape="rect" id="node6" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268" title="_evthr_new" alt="" coords="520,56,610,81"/>
<area shape="rect" id="node7" href="evthr_8c.html#aebcc1d7184db421684a620758855de62" title="evthr_set_exitcb" alt="" coords="670,55,789,80"/>
<area shape="rect" id="node8" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568" title="evthr_set_initcb" alt="" coords="672,104,787,129"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae5094de037a6f5475154ad68374dfcfd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">evthr_pool_t* evthr_pool_wexit_new </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nthreads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#ab8b64959af7208dcbece6a7100219701">evthr_init_cb</a>&#160;</td>
          <td class="paramname"><em>init_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="evthr_8h.html#a04993ff177d1e6a5de673f7b3364722b">evthr_exit_cb</a>&#160;</td>
          <td class="paramname"><em>exit_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>shared</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b">_evthr_pool_new()</a>.</p>

<p>Referenced by <a class="el" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac">_evhtp_use_threads()</a>.</p>
<div class="fragment"><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                                                           {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b">_evthr_pool_new</a>(nthreads, init_cb, exit_cb, shared);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_a33070c7bdd9224ffec651c0dc34a8c6b"><div class="ttname"><a href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b">_evthr_pool_new</a></div><div class="ttdeci">static evthr_pool_t * _evthr_pool_new(int nthreads, evthr_init_cb init_cb, evthr_exit_cb exit_cb, void *shared)</div><div class="ttdef"><b>Definition:</b> evthr.c:366</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_ae5094de037a6f5475154ad68374dfcfd_cgraph.png" border="0" usemap="#evthr_8c_ae5094de037a6f5475154ad68374dfcfd_cgraph" alt=""/></div>
<map name="evthr_8c_ae5094de037a6f5475154ad68374dfcfd_cgraph" id="evthr_8c_ae5094de037a6f5475154ad68374dfcfd_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b" title="_evthr_pool_new" alt="" coords="207,31,329,56"/>
<area shape="rect" id="node3" href="evthr_8c.html#a4ef64d9c2456f217908abf0166d0a8a5" title="evthr_pool_free" alt="" coords="546,5,660,31"/>
<area shape="rect" id="node5" href="evthr_8c.html#a45db8d47201add94f3d05768d47ae987" title="evthr_wexit_new" alt="" coords="377,56,498,81"/>
<area shape="rect" id="node4" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88" title="evthr_free" alt="" coords="727,5,808,31"/>
<area shape="rect" id="node6" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268" title="_evthr_new" alt="" coords="558,56,648,81"/>
<area shape="rect" id="node7" href="evthr_8c.html#aebcc1d7184db421684a620758855de62" title="evthr_set_exitcb" alt="" coords="708,55,827,80"/>
<area shape="rect" id="node8" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568" title="evthr_set_initcb" alt="" coords="710,104,825,129"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_ae5094de037a6f5475154ad68374dfcfd_icgraph.png" border="0" usemap="#evthr_8c_ae5094de037a6f5475154ad68374dfcfd_icgraph" alt=""/></div>
<map name="evthr_8c_ae5094de037a6f5475154ad68374dfcfd_icgraph" id="evthr_8c_ae5094de037a6f5475154ad68374dfcfd_icgraph">
<area shape="rect" id="node2" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="207,31,349,56"/>
<area shape="rect" id="node3" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="416,5,550,31"/>
<area shape="rect" id="node5" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="397,55,569,80"/>
<area shape="rect" id="node4" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="617,5,668,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afbf9e15cc637731b1bdae6c9f77f202f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int evthr_pool_start </td>
          <td>(</td>
          <td class="paramtype">evthr_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#a08fc36209f69a6bf58581c395ca22df0">evthr_start()</a>.</p>

<p>Referenced by <a class="el" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac">_evhtp_use_threads()</a>.</p>
<div class="fragment"><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                      {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    evthr_t * evthr = NULL;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (pool == NULL) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    TAILQ_FOREACH(evthr, &amp;pool-&gt;threads, next) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="evthr_8c.html#a08fc36209f69a6bf58581c395ca22df0">evthr_start</a>(evthr) &lt; 0) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        usleep(5000);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_a08fc36209f69a6bf58581c395ca22df0"><div class="ttname"><a href="evthr_8c.html#a08fc36209f69a6bf58581c395ca22df0">evthr_start</a></div><div class="ttdeci">int evthr_start(evthr_t *thread)</div><div class="ttdef"><b>Definition:</b> evthr.c:255</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_afbf9e15cc637731b1bdae6c9f77f202f_cgraph.png" border="0" usemap="#evthr_8c_afbf9e15cc637731b1bdae6c9f77f202f_cgraph" alt=""/></div>
<map name="evthr_8c_afbf9e15cc637731b1bdae6c9f77f202f_cgraph" id="evthr_8c_afbf9e15cc637731b1bdae6c9f77f202f_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a08fc36209f69a6bf58581c395ca22df0" title="evthr_start" alt="" coords="170,5,255,31"/>
<area shape="rect" id="node3" href="evthr_8c.html#a1023638ec5624538829a1e95b58960b5" title="_evthr_loop" alt="" coords="303,5,394,31"/>
<area shape="rect" id="node4" href="evthr_8c.html#a7ca698fd31b3842cf9336146d9b55d03" title="_evthr_read_cmd" alt="" coords="442,5,567,31"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="evthr_8c_afbf9e15cc637731b1bdae6c9f77f202f_icgraph.png" border="0" usemap="#evthr_8c_afbf9e15cc637731b1bdae6c9f77f202f_icgraph" alt=""/></div>
<map name="evthr_8c_afbf9e15cc637731b1bdae6c9f77f202f_icgraph" id="evthr_8c_afbf9e15cc637731b1bdae6c9f77f202f_icgraph">
<area shape="rect" id="node2" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="170,31,312,56"/>
<area shape="rect" id="node3" href="evhtp_8h.html#a1de9b82132e719f842e7da3dd2335be0" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="379,5,514,31"/>
<area shape="rect" id="node5" href="evhtp_8h.html#ac49c721f0116634f6cd9d6ee63579fe5" title="Temporary function which will be renamed evhtp_use_threads in the future. evhtp_use_threads() has bee..." alt="" coords="360,55,533,80"/>
<area shape="rect" id="node4" href="test_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="581,5,631,31"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a219998cfb366307196d1013046d3f5d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t stop</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="add0eb34e0cef9e763462cf9080f9be0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* args</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="evhtp_8c.html#aff54db2288eb11a543e3a41398bce612">_evhtp_run_post_accept()</a>, <a class="el" href="evhtp_8c.html#a587a3e810f454348eefee92b969cb4f5">_evhtp_run_pre_accept()</a>, and <a class="el" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268">_evthr_new()</a>.</p>

</div>
</div>
<a class="anchor" id="aaeb82a619f6f2dba845cd9a862f33bfd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="evthr_8h.html#aad251512bf9380b9572db267d5bd5532">evthr_cb</a> cb</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="evhtp_8c.html#a0ea7f9cb9adc7771b2b94892aaf5aba9">_evhtp_request_set_callbacks()</a>, <a class="el" href="evhtp_8h.html#ad1f65d29824a4e4042038923974af521">evhtp_callback_new()</a>, <a class="el" href="evhtp_8h.html#aa2ed6b446b5755122f681d9fbcd826a2">evhtp_kvs_for_each()</a>, <a class="el" href="evhtp_8h.html#ac56c49e27823ae64c4a69fc951629988">evhtp_request_new()</a>, <a class="el" href="evhtp_8h.html#ac1d62f9796fc487040a76cce2b887ab7">evhtp_set_gencb()</a>, <a class="el" href="evhtp_8h.html#a38de573c796fcfd7c3b1249a6288246d">evhtp_set_post_accept_cb()</a>, <a class="el" href="evhtp_8h.html#a5fd4a158d2640ec940f74dfd489d5540">evhtp_set_pre_accept_cb()</a>, <a class="el" href="evthr_8h.html#ae5dd31f2d8ea0638e803292181e9840d">evthr_defer()</a>, <a class="el" href="evthr_8h.html#ae4d07fdb8fa1213e5925e25ee7f38983">evthr_pool_defer()</a>, <a class="el" href="evthr_8c.html#aebcc1d7184db421684a620758855de62">evthr_set_exitcb()</a>, and <a class="el" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568">evthr_set_initcb()</a>.</p>

</div>
</div>
<a class="anchor" id="af7d119462c343c7239b4555c77dc393b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct evthr_pool  __attribute__</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="evthr_8c.html">evthr.c</a></li>
    <li class="footer">Generated on Fri Nov 27 2015 18:37:35 for Libevhtp by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
