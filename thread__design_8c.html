<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Libevhtp: examples/thread_design.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Libevhtp
   &#160;<span id="projectnumber">1.2.12-develop</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('thread__design_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">thread_design.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;<a class="el" href="evhtp_8h_source.html">evhtp.h</a>&gt;</code><br />
<code>#include &lt;hiredis/hiredis.h&gt;</code><br />
<code>#include &lt;hiredis/async.h&gt;</code><br />
<code>#include &lt;hiredis/adapters/libevent.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for thread_design.c:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c__incl.png" border="0" usemap="#examples_2thread__design_8c" alt=""/></div>
<map name="examples_2thread__design_8c" id="examples_2thread__design_8c">
<area shape="rect" id="node7" href="evhtp_8h.html" title="evhtp.h" alt="" coords="560,79,625,104"/>
<area shape="rect" id="node9" href="evthr_8h.html" title="evthr.h" alt="" coords="169,159,230,184"/>
<area shape="rect" id="node12" href="htparse_8h.html" title="htparse.h" alt="" coords="67,159,144,184"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a93ac29e74eec0391d7697393e98e710a"><td class="memItemLeft" align="right" valign="top">static evthr_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__design_8c.html#a93ac29e74eec0391d7697393e98e710a">get_request_thr</a> (evhtp_request_t *request)</td></tr>
<tr class="separator:a93ac29e74eec0391d7697393e98e710a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f935a1dc83d38794ae77dda33027f7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__design_8c.html#a2f935a1dc83d38794ae77dda33027f7f">redis_global_incr_cb</a> (redisAsyncContext *redis, void *redis_reply, void *arg)</td></tr>
<tr class="separator:a2f935a1dc83d38794ae77dda33027f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa741fae8d16dba83749ec33bd9091a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__design_8c.html#aaa741fae8d16dba83749ec33bd9091a9">redis_srcaddr_incr_cb</a> (redisAsyncContext *redis, void *redis_reply, void *arg)</td></tr>
<tr class="separator:aaa741fae8d16dba83749ec33bd9091a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a144b94610bf92c6e0d449a558b088b6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__design_8c.html#a144b94610bf92c6e0d449a558b088b6a">redis_set_srcport_cb</a> (redisAsyncContext *redis, void *redis_reply, void *arg)</td></tr>
<tr class="separator:a144b94610bf92c6e0d449a558b088b6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f594f6b4acdbd916912fe04c3c9969c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__design_8c.html#a7f594f6b4acdbd916912fe04c3c9969c">redis_get_srcport_cb</a> (redisAsyncContext *redis, void *redis_reply, void *arg)</td></tr>
<tr class="separator:a7f594f6b4acdbd916912fe04c3c9969c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa88a386872b2e9ed3cdf2d099d20b22d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d">app_process_request</a> (evhtp_request_t *request, void *arg)</td></tr>
<tr class="separator:aa88a386872b2e9ed3cdf2d099d20b22d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7850b605551f990f0887eba05a2b09a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__design_8c.html#a7850b605551f990f0887eba05a2b09a6">app_init_thread</a> (evhtp_t *htp, evthr_t *thread, void *arg)</td></tr>
<tr class="separator:a7850b605551f990f0887eba05a2b09a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a93ac29e74eec0391d7697393e98e710a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static evthr_t* get_request_thr </td>
          <td>(</td>
          <td class="paramtype">evhtp_request_t *&#160;</td>
          <td class="paramname"><em>request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="evhtp_8c.html#ad90238a469b4289cf16c2aacc4763d4c">evhtp_request_get_connection()</a>.</p>

<p>Referenced by <a class="el" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d">app_process_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                           {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    evhtp_connection_t * htpconn;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    evthr_t            * thread;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    htpconn = <a class="code" href="evhtp_8c.html#ad90238a469b4289cf16c2aacc4763d4c">evhtp_request_get_connection</a>(request);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    thread  = htpconn-&gt;thread;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> thread;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
<div class="ttc" id="evhtp_8c_html_ad90238a469b4289cf16c2aacc4763d4c"><div class="ttname"><a href="evhtp_8c.html#ad90238a469b4289cf16c2aacc4763d4c">evhtp_request_get_connection</a></div><div class="ttdeci">evhtp_connection_t * evhtp_request_get_connection(evhtp_request_t *request)</div><div class="ttdoc">returns the underlying evhtp_connection_t structure from a request </div><div class="ttdef"><b>Definition:</b> evhtp.c:4023</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_a93ac29e74eec0391d7697393e98e710a_cgraph.png" border="0" usemap="#thread__design_8c_a93ac29e74eec0391d7697393e98e710a_cgraph" alt=""/></div>
<map name="thread__design_8c_a93ac29e74eec0391d7697393e98e710a_cgraph" id="thread__design_8c_a93ac29e74eec0391d7697393e98e710a_cgraph">
<area shape="rect" id="node2" href="evhtp_8c.html#ad90238a469b4289cf16c2aacc4763d4c" title="returns the underlying evhtp_connection_t structure from a request " alt="" coords="168,5,372,31"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_a93ac29e74eec0391d7697393e98e710a_icgraph.png" border="0" usemap="#thread__design_8c_a93ac29e74eec0391d7697393e98e710a_icgraph" alt=""/></div>
<map name="thread__design_8c_a93ac29e74eec0391d7697393e98e710a_icgraph" id="thread__design_8c_a93ac29e74eec0391d7697393e98e710a_icgraph">
<area shape="rect" id="node2" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d" title="app_process_request" alt="" coords="168,5,318,31"/>
<area shape="rect" id="node3" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="366,5,416,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2f935a1dc83d38794ae77dda33027f7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void redis_global_incr_cb </td>
          <td>(</td>
          <td class="paramtype">redisAsyncContext *&#160;</td>
          <td class="paramname"><em>redis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>redis_reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d">app_process_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                                                                {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    redisReply      * reply   = redis_reply;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    evhtp_request_t * request = arg;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    printf(<span class="stringliteral">&quot;global_incr_cb(%p)\n&quot;</span>, request);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (reply == NULL || reply-&gt;type != REDIS_REPLY_INTEGER) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        evbuffer_add_printf(request-&gt;buffer_out,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                            <span class="stringliteral">&quot;redis_global_incr_cb() failed\n&quot;</span>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    evbuffer_add_printf(request-&gt;buffer_out,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                        <span class="stringliteral">&quot;Total requests = %lld\n&quot;</span>, reply-&gt;integer);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_a2f935a1dc83d38794ae77dda33027f7f_icgraph.png" border="0" usemap="#thread__design_8c_a2f935a1dc83d38794ae77dda33027f7f_icgraph" alt=""/></div>
<map name="thread__design_8c_a2f935a1dc83d38794ae77dda33027f7f_icgraph" id="thread__design_8c_a2f935a1dc83d38794ae77dda33027f7f_icgraph">
<area shape="rect" id="node2" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d" title="app_process_request" alt="" coords="197,5,347,31"/>
<area shape="rect" id="node3" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="395,5,445,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaa741fae8d16dba83749ec33bd9091a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void redis_srcaddr_incr_cb </td>
          <td>(</td>
          <td class="paramtype">redisAsyncContext *&#160;</td>
          <td class="paramname"><em>redis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>redis_reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d">app_process_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    redisReply      * reply   = redis_reply;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    evhtp_request_t * request = arg;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    printf(<span class="stringliteral">&quot;incr_cb(%p)\n&quot;</span>, request);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (reply == NULL || reply-&gt;type != REDIS_REPLY_INTEGER) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        evbuffer_add_printf(request-&gt;buffer_out,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                            <span class="stringliteral">&quot;redis_srcaddr_incr_cb() failed\n&quot;</span>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    evbuffer_add_printf(request-&gt;buffer_out,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                        <span class="stringliteral">&quot;Requests from this source IP = %lld\n&quot;</span>, reply-&gt;integer);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_aaa741fae8d16dba83749ec33bd9091a9_icgraph.png" border="0" usemap="#thread__design_8c_aaa741fae8d16dba83749ec33bd9091a9_icgraph" alt=""/></div>
<map name="thread__design_8c_aaa741fae8d16dba83749ec33bd9091a9_icgraph" id="thread__design_8c_aaa741fae8d16dba83749ec33bd9091a9_icgraph">
<area shape="rect" id="node2" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d" title="app_process_request" alt="" coords="206,5,355,31"/>
<area shape="rect" id="node3" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="403,5,454,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a144b94610bf92c6e0d449a558b088b6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void redis_set_srcport_cb </td>
          <td>(</td>
          <td class="paramtype">redisAsyncContext *&#160;</td>
          <td class="paramname"><em>redis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>redis_reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d">app_process_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                                                                {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    redisReply      * reply   = redis_reply;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    evhtp_request_t * request = arg;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    printf(<span class="stringliteral">&quot;set_srcport_cb(%p)\n&quot;</span>, request);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (reply == NULL || reply-&gt;type != REDIS_REPLY_INTEGER) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        evbuffer_add_printf(request-&gt;buffer_out,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                            <span class="stringliteral">&quot;redis_set_srcport_cb() failed\n&quot;</span>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> (!reply-&gt;integer) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        evbuffer_add_printf(request-&gt;buffer_out,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                            <span class="stringliteral">&quot;This source port has been seen already.\n&quot;</span>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        evbuffer_add_printf(request-&gt;buffer_out,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                            <span class="stringliteral">&quot;This source port has never been seen.\n&quot;</span>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_a144b94610bf92c6e0d449a558b088b6a_icgraph.png" border="0" usemap="#thread__design_8c_a144b94610bf92c6e0d449a558b088b6a_icgraph" alt=""/></div>
<map name="thread__design_8c_a144b94610bf92c6e0d449a558b088b6a_icgraph" id="thread__design_8c_a144b94610bf92c6e0d449a558b088b6a_icgraph">
<area shape="rect" id="node2" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d" title="app_process_request" alt="" coords="198,5,348,31"/>
<area shape="rect" id="node3" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="396,5,446,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7f594f6b4acdbd916912fe04c3c9969c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void redis_get_srcport_cb </td>
          <td>(</td>
          <td class="paramtype">redisAsyncContext *&#160;</td>
          <td class="paramname"><em>redis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>redis_reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evhtp_8c.html#a3f537cfe43afe795f575e4080d8a4f69">evhtp_request_resume()</a>, <a class="el" href="evhtp_8h.html#a137a73d703e70ec04a807668a5d523da">EVHTP_RES_OK</a>, and <a class="el" href="evhtp_8c.html#a207355af4b2d3e5211c4df0bbb8d195d">evhtp_send_reply()</a>.</p>

<p>Referenced by <a class="el" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d">app_process_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                                                                {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    redisReply      * reply   = redis_reply;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    evhtp_request_t * request = arg;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">int</span>               i;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    printf(<span class="stringliteral">&quot;get_srcport_cb(%p)\n&quot;</span>, request);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (reply == NULL || reply-&gt;type != REDIS_REPLY_ARRAY) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        evbuffer_add_printf(request-&gt;buffer_out,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                            <span class="stringliteral">&quot;redis_get_srcport_cb() failed.\n&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    evbuffer_add_printf(request-&gt;buffer_out,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        <span class="stringliteral">&quot;source ports which have been seen for your ip:\n&quot;</span>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; reply-&gt;elements; i++) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        redisReply * elem = reply-&gt;element[i];</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        evbuffer_add_printf(request-&gt;buffer_out, <span class="stringliteral">&quot;%s &quot;</span>, elem-&gt;str);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    evbuffer_add(request-&gt;buffer_out, <span class="stringliteral">&quot;\n&quot;</span>, 1);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">/* final callback for redis, so send the response */</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="evhtp_8c.html#a207355af4b2d3e5211c4df0bbb8d195d">evhtp_send_reply</a>(request, <a class="code" href="evhtp_8h.html#a137a73d703e70ec04a807668a5d523da">EVHTP_RES_OK</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="evhtp_8c.html#a3f537cfe43afe795f575e4080d8a4f69">evhtp_request_resume</a>(request);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="ttc" id="evhtp_8c_html_a207355af4b2d3e5211c4df0bbb8d195d"><div class="ttname"><a href="evhtp_8c.html#a207355af4b2d3e5211c4df0bbb8d195d">evhtp_send_reply</a></div><div class="ttdeci">void evhtp_send_reply(evhtp_request_t *request, evhtp_res code)</div><div class="ttdoc">generates all the right information for a reply to be sent to the client </div><div class="ttdef"><b>Definition:</b> evhtp.c:3046</div></div>
<div class="ttc" id="evhtp_8c_html_a3f537cfe43afe795f575e4080d8a4f69"><div class="ttname"><a href="evhtp_8c.html#a3f537cfe43afe795f575e4080d8a4f69">evhtp_request_resume</a></div><div class="ttdeci">void evhtp_request_resume(evhtp_request_t *request)</div><div class="ttdoc">Wrapper around evhtp_connection_resume. </div><div class="ttdef"><b>Definition:</b> evhtp.c:2402</div></div>
<div class="ttc" id="evhtp_8h_html_a137a73d703e70ec04a807668a5d523da"><div class="ttname"><a href="evhtp_8h.html#a137a73d703e70ec04a807668a5d523da">EVHTP_RES_OK</a></div><div class="ttdeci">#define EVHTP_RES_OK</div><div class="ttdef"><b>Definition:</b> evhtp.h:213</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_a7f594f6b4acdbd916912fe04c3c9969c_cgraph.png" border="0" usemap="#thread__design_8c_a7f594f6b4acdbd916912fe04c3c9969c_cgraph" alt=""/></div>
<map name="thread__design_8c_a7f594f6b4acdbd916912fe04c3c9969c_cgraph" id="thread__design_8c_a7f594f6b4acdbd916912fe04c3c9969c_cgraph">
<area shape="rect" id="node2" href="evhtp_8c.html#a3f537cfe43afe795f575e4080d8a4f69" title="Wrapper around evhtp_connection_resume. " alt="" coords="199,365,357,391"/>
<area shape="rect" id="node4" href="evhtp_8c.html#a207355af4b2d3e5211c4df0bbb8d195d" title="generates all the right information for a reply to be sent to the client " alt="" coords="215,500,341,525"/>
<area shape="rect" id="node3" href="evhtp_8c.html#ac62f0e64aca4fca3648b67042a6c3646" title="resumes a connection (enables reading) and activates resume event. " alt="" coords="418,279,596,304"/>
<area shape="rect" id="node5" href="evhtp_8c.html#a0fd9982ade86ed23ee41eadb33b0e3c1" title="_evhtp_create_reply" alt="" coords="436,328,578,353"/>
<area shape="rect" id="node20" href="evhtp_8c.html#ad8e05f912c12705d93c0a1aec125544a" title="free&#39;s all connection related resources, this will also call your request fini hook and request fini ..." alt="" coords="429,500,585,525"/>
<area shape="rect" id="node27" href="evhtp_8c.html#af0e521e1beb5c171441af8c7170d83b9" title="returns the underlying connections bufferevent " alt="" coords="416,549,597,575"/>
<area shape="rect" id="node28" href="evhtp_8c.html#ad90238a469b4289cf16c2aacc4763d4c" title="returns the underlying evhtp_connection_t structure from a request " alt="" coords="405,599,609,624"/>
<area shape="rect" id="node6" href="evhtp_8c.html#a25a957881c47ce6d3e8b6119d664e9b7" title="_evhtp_create_headers" alt="" coords="673,5,834,31"/>
<area shape="rect" id="node7" href="evhtp_8h.html#a8b553a92dea8df3d2a0eb987a8b2cd39" title="finds the value of a key in a evhtp_headers_t structure " alt="" coords="688,55,820,80"/>
<area shape="rect" id="node8" href="evhtp_8h.html#a503b047c0137763e0adaf635b7c664a8" title="creates a new evhtp_header_t key/val structure " alt="" coords="686,104,821,129"/>
<area shape="rect" id="node9" href="evhtp_8h.html#a45e5dd8e1166577254d6da73f4cf9fd1" title="adds an evhtp_header_t to the end of the evhtp_headers_t tailq " alt="" coords="660,153,848,179"/>
<area shape="rect" id="node10" href="evhtp__numtoa_8c.html#aef81286f525f97a5f761964f50599a63" title="based on the system architecture, convert a size_t number to a string. " alt="" coords="681,255,826,280"/>
<area shape="rect" id="node11" href="evhtp__numtoa_8c.html#a8cc234df8a9409d796e9fa426273c218" title="converts uint32_t value to string " alt="" coords="914,205,1057,231"/>
<area shape="rect" id="node14" href="htparse_8c.html#ab34fb33769128cc477a6f9a5c0e2bc63" title="htparser_get_major" alt="" coords="685,304,822,329"/>
<area shape="rect" id="node15" href="htparse_8c.html#a70e8640f33ccec623fa8e1bdae8c693d" title="htparser_get_minor" alt="" coords="685,353,822,379"/>
<area shape="rect" id="node16" href="htparse_8c.html#ad931068e981eb54e6fc99ad7c62f104a" title="htparser_get_multipart" alt="" coords="676,403,831,428"/>
<area shape="rect" id="node17" href="htparse_8c.html#a40511e662043f9255ec3ef7376966c31" title="htparser_set_major" alt="" coords="686,452,822,477"/>
<area shape="rect" id="node18" href="htparse_8c.html#ab2ee1f6fd7456337e2e483bab9973413" title="htparser_set_minor" alt="" coords="686,501,822,527"/>
<area shape="rect" id="node19" href="evhtp_8c.html#ad41c784fc766dd3497fe564a88d7cb1f" title="status_code_to_str" alt="" coords="687,551,821,576"/>
<area shape="rect" id="node13" href="evhtp__numtoa_8c.html#a1dae3968a0cdd6586c0ebacf415e929e" title="convert uint64_t value to a string " alt="" coords="914,255,1057,280"/>
<area shape="rect" id="node12" href="evhtp__numtoa_8c.html#ac884408acf9fb0963fcfcb572bb96fa4" title="strreverse" alt="" coords="1156,231,1236,256"/>
<area shape="rect" id="node21" href="evhtp_8c.html#ae405ab595637e4078a9a01821d3df580" title="runs the user&#45;definedhook called just prior to a connection being closed " alt="" coords="657,600,851,625"/>
<area shape="rect" id="node22" href="evhtp_8c.html#ac1b09ba3d872e8a0b93a60805996dae7" title="frees all data in an evhtp_request_t along with calling finished hooks " alt="" coords="682,649,825,675"/>
<area shape="rect" id="node23" href="evhtp_8c.html#ab82576a33f5888bec124961eaa86a9c0" title="runs the user&#45;defined hook called just prior to a request been free()&#39;d " alt="" coords="899,624,1073,649"/>
<area shape="rect" id="node24" href="evhtp_8c.html#a4b730b06fe6a0093afb2f4f391e5455e" title="frees an overlay URI structure " alt="" coords="929,673,1043,699"/>
<area shape="rect" id="node25" href="evhtp_8c.html#a2dfd994fb181a6efaf2c87716b05cd50" title="frees an authority structure " alt="" coords="1121,648,1271,673"/>
<area shape="rect" id="node26" href="evhtp_8c.html#a9ab2a6de89fce03b9543bdafa6f22db5" title="_evhtp_path_free" alt="" coords="1133,697,1258,723"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_a7f594f6b4acdbd916912fe04c3c9969c_icgraph.png" border="0" usemap="#thread__design_8c_a7f594f6b4acdbd916912fe04c3c9969c_icgraph" alt=""/></div>
<map name="thread__design_8c_a7f594f6b4acdbd916912fe04c3c9969c_icgraph" id="thread__design_8c_a7f594f6b4acdbd916912fe04c3c9969c_icgraph">
<area shape="rect" id="node2" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d" title="app_process_request" alt="" coords="199,5,349,31"/>
<area shape="rect" id="node3" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="397,5,447,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa88a386872b2e9ed3cdf2d099d20b22d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void app_process_request </td>
          <td>(</td>
          <td class="paramtype">evhtp_request_t *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evhtp_8c.html#ad90238a469b4289cf16c2aacc4763d4c">evhtp_request_get_connection()</a>, <a class="el" href="evhtp_8c.html#ab35aec3adb697918e24b8ff966afe235">evhtp_request_pause()</a>, <a class="el" href="evthr_8c.html#a15c9c2860107ab242683af481b7b8164">evthr_get_aux()</a>, <a class="el" href="thread__design_8c.html#a93ac29e74eec0391d7697393e98e710a">get_request_thr()</a>, <a class="el" href="thread__design_8c.html#a7f594f6b4acdbd916912fe04c3c9969c">redis_get_srcport_cb()</a>, <a class="el" href="thread__design_8c.html#a2f935a1dc83d38794ae77dda33027f7f">redis_global_incr_cb()</a>, <a class="el" href="thread__design_8c.html#a144b94610bf92c6e0d449a558b088b6a">redis_set_srcport_cb()</a>, and <a class="el" href="thread__design_8c.html#aaa741fae8d16dba83749ec33bd9091a9">redis_srcaddr_incr_cb()</a>.</p>

<p>Referenced by <a class="el" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                                           {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keyword">struct </span>sockaddr_in * sin;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">struct </span>app_parent  * app_parent;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">struct </span>app         * app;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    evthr_t            * thread;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    evhtp_connection_t * conn;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordtype">char</span>                 tmp[1024];</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    printf(<span class="stringliteral">&quot;process_request(%p)\n&quot;</span>, request);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    thread = <a class="code" href="thread__design_8c.html#a93ac29e74eec0391d7697393e98e710a">get_request_thr</a>(request);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    conn   = <a class="code" href="evhtp_8c.html#ad90238a469b4289cf16c2aacc4763d4c">evhtp_request_get_connection</a>(request);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    app    = (<span class="keyword">struct </span>app *)<a class="code" href="evthr_8c.html#a15c9c2860107ab242683af481b7b8164">evthr_get_aux</a>(thread);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    sin    = (<span class="keyword">struct </span>sockaddr_in *)conn-&gt;saddr;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    evutil_inet_ntop(AF_INET, &amp;sin-&gt;sin_addr, tmp, <span class="keyword">sizeof</span>(tmp));</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">/* increment a global counter of hits on redis */</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    redisAsyncCommand(app-&gt;redis, <a class="code" href="thread__design_8c.html#a2f935a1dc83d38794ae77dda33027f7f">redis_global_incr_cb</a>,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                      (<span class="keywordtype">void</span> *)request, <span class="stringliteral">&quot;INCR requests:total&quot;</span>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">/* increment a counter for hits from this source address on redis */</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    redisAsyncCommand(app-&gt;redis, <a class="code" href="thread__design_8c.html#aaa741fae8d16dba83749ec33bd9091a9">redis_srcaddr_incr_cb</a>,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                      (<span class="keywordtype">void</span> *)request, <span class="stringliteral">&quot;INCR requests:ip:%s&quot;</span>, tmp);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">/* add the source port of this request to a source-specific set */</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    redisAsyncCommand(app-&gt;redis, <a class="code" href="thread__design_8c.html#a144b94610bf92c6e0d449a558b088b6a">redis_set_srcport_cb</a>, (<span class="keywordtype">void</span> *)request,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                      <span class="stringliteral">&quot;SADD requests:ip:%s:ports %d&quot;</span>, tmp, ntohs(sin-&gt;sin_port));</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">/* get all of the ports this source address has used */</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    redisAsyncCommand(app-&gt;redis, <a class="code" href="thread__design_8c.html#a7f594f6b4acdbd916912fe04c3c9969c">redis_get_srcport_cb</a>, (<span class="keywordtype">void</span> *)request,</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                      <span class="stringliteral">&quot;SMEMBERS requests:ip:%s:ports&quot;</span>, tmp);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">/* pause the request processing */</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="evhtp_8c.html#ab35aec3adb697918e24b8ff966afe235">evhtp_request_pause</a>(request);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div>
<div class="ttc" id="thread__design_8c_html_a144b94610bf92c6e0d449a558b088b6a"><div class="ttname"><a href="thread__design_8c.html#a144b94610bf92c6e0d449a558b088b6a">redis_set_srcport_cb</a></div><div class="ttdeci">void redis_set_srcport_cb(redisAsyncContext *redis, void *redis_reply, void *arg)</div><div class="ttdef"><b>Definition:</b> thread_design.c:161</div></div>
<div class="ttc" id="evhtp_8c_html_ab35aec3adb697918e24b8ff966afe235"><div class="ttname"><a href="evhtp_8c.html#ab35aec3adb697918e24b8ff966afe235">evhtp_request_pause</a></div><div class="ttdeci">void evhtp_request_pause(evhtp_request_t *request)</div><div class="ttdoc">Wrapper around evhtp_connection_pause. </div><div class="ttdef"><b>Definition:</b> evhtp.c:2387</div></div>
<div class="ttc" id="evhtp_8c_html_ad90238a469b4289cf16c2aacc4763d4c"><div class="ttname"><a href="evhtp_8c.html#ad90238a469b4289cf16c2aacc4763d4c">evhtp_request_get_connection</a></div><div class="ttdeci">evhtp_connection_t * evhtp_request_get_connection(evhtp_request_t *request)</div><div class="ttdoc">returns the underlying evhtp_connection_t structure from a request </div><div class="ttdef"><b>Definition:</b> evhtp.c:4023</div></div>
<div class="ttc" id="thread__design_8c_html_a7f594f6b4acdbd916912fe04c3c9969c"><div class="ttname"><a href="thread__design_8c.html#a7f594f6b4acdbd916912fe04c3c9969c">redis_get_srcport_cb</a></div><div class="ttdeci">void redis_get_srcport_cb(redisAsyncContext *redis, void *redis_reply, void *arg)</div><div class="ttdef"><b>Definition:</b> thread_design.c:183</div></div>
<div class="ttc" id="evthr_8c_html_a15c9c2860107ab242683af481b7b8164"><div class="ttname"><a href="evthr_8c.html#a15c9c2860107ab242683af481b7b8164">evthr_get_aux</a></div><div class="ttdeci">void * evthr_get_aux(evthr_t *thr)</div><div class="ttdef"><b>Definition:</b> evthr.c:186</div></div>
<div class="ttc" id="thread__design_8c_html_aaa741fae8d16dba83749ec33bd9091a9"><div class="ttname"><a href="thread__design_8c.html#aaa741fae8d16dba83749ec33bd9091a9">redis_srcaddr_incr_cb</a></div><div class="ttdeci">void redis_srcaddr_incr_cb(redisAsyncContext *redis, void *redis_reply, void *arg)</div><div class="ttdef"><b>Definition:</b> thread_design.c:144</div></div>
<div class="ttc" id="thread__design_8c_html_a93ac29e74eec0391d7697393e98e710a"><div class="ttname"><a href="thread__design_8c.html#a93ac29e74eec0391d7697393e98e710a">get_request_thr</a></div><div class="ttdeci">static evthr_t * get_request_thr(evhtp_request_t *request)</div><div class="ttdef"><b>Definition:</b> thread_design.c:116</div></div>
<div class="ttc" id="thread__design_8c_html_a2f935a1dc83d38794ae77dda33027f7f"><div class="ttname"><a href="thread__design_8c.html#a2f935a1dc83d38794ae77dda33027f7f">redis_global_incr_cb</a></div><div class="ttdeci">void redis_global_incr_cb(redisAsyncContext *redis, void *redis_reply, void *arg)</div><div class="ttdef"><b>Definition:</b> thread_design.c:127</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_aa88a386872b2e9ed3cdf2d099d20b22d_cgraph.png" border="0" usemap="#thread__design_8c_aa88a386872b2e9ed3cdf2d099d20b22d_cgraph" alt=""/></div>
<map name="thread__design_8c_aa88a386872b2e9ed3cdf2d099d20b22d_cgraph" id="thread__design_8c_aa88a386872b2e9ed3cdf2d099d20b22d_cgraph">
<area shape="rect" id="node2" href="evhtp_8c.html#ad90238a469b4289cf16c2aacc4763d4c" title="returns the underlying evhtp_connection_t structure from a request " alt="" coords="621,59,825,84"/>
<area shape="rect" id="node3" href="evhtp_8c.html#ab35aec3adb697918e24b8ff966afe235" title="Wrapper around evhtp_connection_pause. " alt="" coords="204,56,354,81"/>
<area shape="rect" id="node5" href="evthr_8c.html#a15c9c2860107ab242683af481b7b8164" title="evthr_get_aux" alt="" coords="226,105,332,131"/>
<area shape="rect" id="node6" href="thread__design_8c.html#a93ac29e74eec0391d7697393e98e710a" title="get_request_thr" alt="" coords="431,131,546,156"/>
<area shape="rect" id="node7" href="thread__design_8c.html#a7f594f6b4acdbd916912fe04c3c9969c" title="redis_get_srcport_cb" alt="" coords="206,207,352,232"/>
<area shape="rect" id="node34" href="thread__design_8c.html#a2f935a1dc83d38794ae77dda33027f7f" title="redis_global_incr_cb" alt="" coords="207,256,351,281"/>
<area shape="rect" id="node35" href="thread__design_8c.html#a144b94610bf92c6e0d449a558b088b6a" title="redis_set_srcport_cb" alt="" coords="207,305,352,331"/>
<area shape="rect" id="node36" href="thread__design_8c.html#aaa741fae8d16dba83749ec33bd9091a9" title="redis_srcaddr_incr_cb" alt="" coords="203,355,355,380"/>
<area shape="rect" id="node4" href="evhtp_8c.html#a411f8bd2a68359f2bfb457961f94db97" title="pauses a connection (disables reading) " alt="" coords="403,56,573,81"/>
<area shape="rect" id="node8" href="evhtp_8c.html#a3f537cfe43afe795f575e4080d8a4f69" title="Wrapper around evhtp_connection_resume. " alt="" coords="409,381,567,407"/>
<area shape="rect" id="node10" href="evhtp_8c.html#a207355af4b2d3e5211c4df0bbb8d195d" title="generates all the right information for a reply to be sent to the client " alt="" coords="425,207,552,232"/>
<area shape="rect" id="node9" href="evhtp_8c.html#ac62f0e64aca4fca3648b67042a6c3646" title="resumes a connection (enables reading) and activates resume event. " alt="" coords="634,405,812,431"/>
<area shape="rect" id="node11" href="evhtp_8c.html#a0fd9982ade86ed23ee41eadb33b0e3c1" title="_evhtp_create_reply" alt="" coords="652,356,794,381"/>
<area shape="rect" id="node26" href="evhtp_8c.html#ad8e05f912c12705d93c0a1aec125544a" title="free&#39;s all connection related resources, this will also call your request fini hook and request fini ..." alt="" coords="645,108,801,133"/>
<area shape="rect" id="node33" href="evhtp_8c.html#af0e521e1beb5c171441af8c7170d83b9" title="returns the underlying connections bufferevent " alt="" coords="632,207,813,232"/>
<area shape="rect" id="node12" href="evhtp_8c.html#a25a957881c47ce6d3e8b6119d664e9b7" title="_evhtp_create_headers" alt="" coords="889,132,1050,157"/>
<area shape="rect" id="node13" href="evhtp_8h.html#a8b553a92dea8df3d2a0eb987a8b2cd39" title="finds the value of a key in a evhtp_headers_t structure " alt="" coords="904,181,1036,207"/>
<area shape="rect" id="node14" href="evhtp_8h.html#a503b047c0137763e0adaf635b7c664a8" title="creates a new evhtp_header_t key/val structure " alt="" coords="902,231,1037,256"/>
<area shape="rect" id="node15" href="evhtp_8h.html#a45e5dd8e1166577254d6da73f4cf9fd1" title="adds an evhtp_header_t to the end of the evhtp_headers_t tailq " alt="" coords="876,280,1064,305"/>
<area shape="rect" id="node16" href="evhtp__numtoa_8c.html#aef81286f525f97a5f761964f50599a63" title="based on the system architecture, convert a size_t number to a string. " alt="" coords="898,381,1042,407"/>
<area shape="rect" id="node17" href="evhtp__numtoa_8c.html#a8cc234df8a9409d796e9fa426273c218" title="converts uint32_t value to string " alt="" coords="1130,332,1273,357"/>
<area shape="rect" id="node20" href="htparse_8c.html#ab34fb33769128cc477a6f9a5c0e2bc63" title="htparser_get_major" alt="" coords="901,431,1038,456"/>
<area shape="rect" id="node21" href="htparse_8c.html#a70e8640f33ccec623fa8e1bdae8c693d" title="htparser_get_minor" alt="" coords="901,480,1038,505"/>
<area shape="rect" id="node22" href="htparse_8c.html#ad931068e981eb54e6fc99ad7c62f104a" title="htparser_get_multipart" alt="" coords="892,529,1047,555"/>
<area shape="rect" id="node23" href="htparse_8c.html#a40511e662043f9255ec3ef7376966c31" title="htparser_set_major" alt="" coords="902,579,1038,604"/>
<area shape="rect" id="node24" href="htparse_8c.html#ab2ee1f6fd7456337e2e483bab9973413" title="htparser_set_minor" alt="" coords="902,628,1038,653"/>
<area shape="rect" id="node25" href="evhtp_8c.html#ad41c784fc766dd3497fe564a88d7cb1f" title="status_code_to_str" alt="" coords="903,677,1037,703"/>
<area shape="rect" id="node19" href="evhtp__numtoa_8c.html#a1dae3968a0cdd6586c0ebacf415e929e" title="convert uint64_t value to a string " alt="" coords="1130,381,1273,407"/>
<area shape="rect" id="node18" href="evhtp__numtoa_8c.html#ac884408acf9fb0963fcfcb572bb96fa4" title="strreverse" alt="" coords="1372,357,1452,383"/>
<area shape="rect" id="node27" href="evhtp_8c.html#ae405ab595637e4078a9a01821d3df580" title="runs the user&#45;definedhook called just prior to a connection being closed " alt="" coords="873,33,1067,59"/>
<area shape="rect" id="node28" href="evhtp_8c.html#ac1b09ba3d872e8a0b93a60805996dae7" title="frees all data in an evhtp_request_t along with calling finished hooks " alt="" coords="898,83,1042,108"/>
<area shape="rect" id="node29" href="evhtp_8c.html#ab82576a33f5888bec124961eaa86a9c0" title="runs the user&#45;defined hook called just prior to a request been free()&#39;d " alt="" coords="1115,59,1289,84"/>
<area shape="rect" id="node30" href="evhtp_8c.html#a4b730b06fe6a0093afb2f4f391e5455e" title="frees an overlay URI structure " alt="" coords="1145,108,1259,133"/>
<area shape="rect" id="node31" href="evhtp_8c.html#a2dfd994fb181a6efaf2c87716b05cd50" title="frees an authority structure " alt="" coords="1337,133,1487,159"/>
<area shape="rect" id="node32" href="evhtp_8c.html#a9ab2a6de89fce03b9543bdafa6f22db5" title="_evhtp_path_free" alt="" coords="1349,84,1475,109"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_aa88a386872b2e9ed3cdf2d099d20b22d_icgraph.png" border="0" usemap="#thread__design_8c_aa88a386872b2e9ed3cdf2d099d20b22d_icgraph" alt=""/></div>
<map name="thread__design_8c_aa88a386872b2e9ed3cdf2d099d20b22d_icgraph" id="thread__design_8c_aa88a386872b2e9ed3cdf2d099d20b22d_icgraph">
<area shape="rect" id="node2" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="203,5,253,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7850b605551f990f0887eba05a2b09a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void app_init_thread </td>
          <td>(</td>
          <td class="paramtype">evhtp_t *&#160;</td>
          <td class="paramname"><em>htp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">evthr_t *&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="evthr_8c.html#a46dff6afc6d6722688fd09c74add2ddd">evthr_get_base()</a>, and <a class="el" href="evthr_8c.html#a11ac55f7b6aa964581d18d36efb8dc76">evthr_set_aux()</a>.</p>

<p>Referenced by <a class="el" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                                             {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keyword">struct </span>app_parent * app_parent;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keyword">struct </span>app        * app;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    app_parent  = (<span class="keyword">struct </span>app_parent *)arg;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    app         = calloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> app), 1);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    app-&gt;parent = app_parent;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    app-&gt;evbase = <a class="code" href="evthr_8c.html#a46dff6afc6d6722688fd09c74add2ddd">evthr_get_base</a>(thread);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    app-&gt;redis  = redisAsyncConnect(app_parent-&gt;redis_host, app_parent-&gt;redis_port);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    redisLibeventAttach(app-&gt;redis, app-&gt;evbase);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="evthr_8c.html#a11ac55f7b6aa964581d18d36efb8dc76">evthr_set_aux</a>(thread, app);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="ttc" id="evthr_8c_html_a11ac55f7b6aa964581d18d36efb8dc76"><div class="ttname"><a href="evthr_8c.html#a11ac55f7b6aa964581d18d36efb8dc76">evthr_set_aux</a></div><div class="ttdeci">void evthr_set_aux(evthr_t *thr, void *aux)</div><div class="ttdef"><b>Definition:</b> evthr.c:179</div></div>
<div class="ttc" id="evthr_8c_html_a46dff6afc6d6722688fd09c74add2ddd"><div class="ttname"><a href="evthr_8c.html#a46dff6afc6d6722688fd09c74add2ddd">evthr_get_base</a></div><div class="ttdeci">evbase_t * evthr_get_base(evthr_t *thr)</div><div class="ttdef"><b>Definition:</b> evthr.c:174</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_a7850b605551f990f0887eba05a2b09a6_cgraph.png" border="0" usemap="#thread__design_8c_a7850b605551f990f0887eba05a2b09a6_cgraph" alt=""/></div>
<map name="thread__design_8c_a7850b605551f990f0887eba05a2b09a6_cgraph" id="thread__design_8c_a7850b605551f990f0887eba05a2b09a6_cgraph">
<area shape="rect" id="node2" href="evthr_8c.html#a46dff6afc6d6722688fd09c74add2ddd" title="evthr_get_base" alt="" coords="167,5,280,31"/>
<area shape="rect" id="node3" href="evthr_8c.html#a11ac55f7b6aa964581d18d36efb8dc76" title="evthr_set_aux" alt="" coords="171,55,276,80"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_a7850b605551f990f0887eba05a2b09a6_icgraph.png" border="0" usemap="#thread__design_8c_a7850b605551f990f0887eba05a2b09a6_icgraph" alt=""/></div>
<map name="thread__design_8c_a7850b605551f990f0887eba05a2b09a6_icgraph" id="thread__design_8c_a7850b605551f990f0887eba05a2b09a6_icgraph">
<area shape="rect" id="node2" href="thread__design_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="167,5,217,31"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="thread__design_8c.html#a7850b605551f990f0887eba05a2b09a6">app_init_thread()</a>, <a class="el" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d">app_process_request()</a>, <a class="el" href="evhtp_8c.html#a25b40b813f8a36cc383915b6ed3ec0ce">evhtp_bind_socket()</a>, <a class="el" href="evhtp_8c.html#a97bbe491064943a8d5e0d3e7a937209b">evhtp_new()</a>, <a class="el" href="evhtp_8c.html#a39a5c7910a382f902c896b25854b742d">evhtp_set_gencb()</a>, and <a class="el" href="evhtp_8c.html#abadb1db7b98cd01c9856ebe55efe77b3">evhtp_use_threads()</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                             {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="evthr_8h.html#ac1a9bb265b995e58237889446894e944">evbase_t</a>          * evbase;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    evhtp_t           * evhtp;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keyword">struct </span>app_parent * app_p;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    evbase            = event_base_new();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    evhtp             = <a class="code" href="evhtp_8c.html#a97bbe491064943a8d5e0d3e7a937209b">evhtp_new</a>(evbase, NULL);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    app_p             = calloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> app_parent), 1);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    app_p-&gt;evhtp      = evhtp;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    app_p-&gt;evbase     = evbase;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    app_p-&gt;redis_host = <span class="stringliteral">&quot;127.0.0.1&quot;</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    app_p-&gt;redis_port = 6379;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="evhtp_8c.html#a39a5c7910a382f902c896b25854b742d">evhtp_set_gencb</a>(evhtp, <a class="code" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d">app_process_request</a>, NULL);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="evhtp_8c.html#abadb1db7b98cd01c9856ebe55efe77b3">evhtp_use_threads</a>(evhtp, <a class="code" href="thread__design_8c.html#a7850b605551f990f0887eba05a2b09a6">app_init_thread</a>, 4, app_p);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="evhtp_8c.html#a25b40b813f8a36cc383915b6ed3ec0ce">evhtp_bind_socket</a>(evhtp, <span class="stringliteral">&quot;127.0.0.1&quot;</span>, 9090, 1024);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    event_base_loop(evbase, 0);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
<div class="ttc" id="evhtp_8c_html_a25b40b813f8a36cc383915b6ed3ec0ce"><div class="ttname"><a href="evhtp_8c.html#a25b40b813f8a36cc383915b6ed3ec0ce">evhtp_bind_socket</a></div><div class="ttdeci">int evhtp_bind_socket(evhtp_t *htp, const char *baddr, uint16_t port, int backlog)</div><div class="ttdoc">bind to a socket, optionally with specific protocol support formatting. The addr can be defined as on...</div><div class="ttdef"><b>Definition:</b> evhtp.c:3274</div></div>
<div class="ttc" id="evhtp_8c_html_abadb1db7b98cd01c9856ebe55efe77b3"><div class="ttname"><a href="evhtp_8c.html#abadb1db7b98cd01c9856ebe55efe77b3">evhtp_use_threads</a></div><div class="ttdeci">int evhtp_use_threads(evhtp_t *htp, evhtp_thread_init_cb init_cb, int nthreads, void *arg)</div><div class="ttdoc">Enable thread-pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;...</div><div class="ttdef"><b>Definition:</b> evhtp.c:3670</div></div>
<div class="ttc" id="thread__design_8c_html_a7850b605551f990f0887eba05a2b09a6"><div class="ttname"><a href="thread__design_8c.html#a7850b605551f990f0887eba05a2b09a6">app_init_thread</a></div><div class="ttdeci">void app_init_thread(evhtp_t *htp, evthr_t *thread, void *arg)</div><div class="ttdef"><b>Definition:</b> thread_design.c:251</div></div>
<div class="ttc" id="evthr_8h_html_ac1a9bb265b995e58237889446894e944"><div class="ttname"><a href="evthr_8h.html#ac1a9bb265b995e58237889446894e944">evbase_t</a></div><div class="ttdeci">struct event_base evbase_t</div><div class="ttdef"><b>Definition:</b> evthr.h:23</div></div>
<div class="ttc" id="thread__design_8c_html_aa88a386872b2e9ed3cdf2d099d20b22d"><div class="ttname"><a href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d">app_process_request</a></div><div class="ttdeci">void app_process_request(evhtp_request_t *request, void *arg)</div><div class="ttdef"><b>Definition:</b> thread_design.c:213</div></div>
<div class="ttc" id="evhtp_8c_html_a39a5c7910a382f902c896b25854b742d"><div class="ttname"><a href="evhtp_8c.html#a39a5c7910a382f902c896b25854b742d">evhtp_set_gencb</a></div><div class="ttdeci">void evhtp_set_gencb(evhtp_t *htp, evhtp_callback_cb cb, void *arg)</div><div class="ttdoc">sets a callback which is called if no other callbacks are matched </div><div class="ttdef"><b>Definition:</b> evhtp.c:3773</div></div>
<div class="ttc" id="evhtp_8c_html_a97bbe491064943a8d5e0d3e7a937209b"><div class="ttname"><a href="evhtp_8c.html#a97bbe491064943a8d5e0d3e7a937209b">evhtp_new</a></div><div class="ttdeci">evhtp_t * evhtp_new(evbase_t *evbase, void *arg)</div><div class="ttdoc">creates a new evhtp_t instance </div><div class="ttdef"><b>Definition:</b> evhtp.c:4212</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thread__design_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph.png" border="0" usemap="#thread__design_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph" alt=""/></div>
<map name="thread__design_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph" id="thread__design_8c_a3c04138a5bfe5d72780bb7e82a18e627_cgraph">
<area shape="rect" id="node2" href="thread__design_8c.html#a7850b605551f990f0887eba05a2b09a6" title="app_init_thread" alt="" coords="114,280,228,305"/>
<area shape="rect" id="node5" href="thread__design_8c.html#aa88a386872b2e9ed3cdf2d099d20b22d" title="app_process_request" alt="" coords="1357,736,1506,761"/>
<area shape="rect" id="node41" href="evhtp_8c.html#a25b40b813f8a36cc383915b6ed3ec0ce" title="bind to a socket, optionally with specific protocol support formatting. The addr can be defined as on..." alt="" coords="105,609,237,634"/>
<area shape="rect" id="node71" href="evhtp_8c.html#a97bbe491064943a8d5e0d3e7a937209b" title="creates a new evhtp_t instance " alt="" coords="128,786,214,812"/>
<area shape="rect" id="node73" href="evhtp_8c.html#a39a5c7910a382f902c896b25854b742d" title="sets a callback which is called if no other callbacks are matched " alt="" coords="299,837,422,862"/>
<area shape="rect" id="node74" href="evhtp_8c.html#abadb1db7b98cd01c9856ebe55efe77b3" title="Enable thread&#45;pool support for an evhtp_t context. Connectios are distributed across &#39;nthreads&#39;..." alt="" coords="104,912,238,937"/>
<area shape="rect" id="node3" href="evthr_8c.html#a46dff6afc6d6722688fd09c74add2ddd" title="evthr_get_base" alt="" coords="1143,280,1257,305"/>
<area shape="rect" id="node4" href="evthr_8c.html#a11ac55f7b6aa964581d18d36efb8dc76" title="evthr_set_aux" alt="" coords="308,229,413,254"/>
<area shape="rect" id="node6" href="evhtp_8c.html#ad90238a469b4289cf16c2aacc4763d4c" title="returns the underlying evhtp_connection_t structure from a request " alt="" coords="2074,737,2278,762"/>
<area shape="rect" id="node7" href="evhtp_8c.html#ab35aec3adb697918e24b8ff966afe235" title="Wrapper around evhtp_connection_pause. " alt="" coords="2102,400,2251,425"/>
<area shape="rect" id="node9" href="evthr_8c.html#a15c9c2860107ab242683af481b7b8164" title="evthr_get_aux" alt="" coords="1620,836,1726,861"/>
<area shape="rect" id="node10" href="thread__design_8c.html#a93ac29e74eec0391d7697393e98e710a" title="get_request_thr" alt="" coords="1866,786,1981,812"/>
<area shape="rect" id="node11" href="thread__design_8c.html#a7f594f6b4acdbd916912fe04c3c9969c" title="redis_get_srcport_cb" alt="" coords="1600,685,1746,710"/>
<area shape="rect" id="node38" href="thread__design_8c.html#a2f935a1dc83d38794ae77dda33027f7f" title="redis_global_incr_cb" alt="" coords="1601,885,1745,910"/>
<area shape="rect" id="node39" href="thread__design_8c.html#a144b94610bf92c6e0d449a558b088b6a" title="redis_set_srcport_cb" alt="" coords="1600,584,1746,609"/>
<area shape="rect" id="node40" href="thread__design_8c.html#aaa741fae8d16dba83749ec33bd9091a9" title="redis_srcaddr_incr_cb" alt="" coords="1597,786,1749,812"/>
<area shape="rect" id="node8" href="evhtp_8c.html#a411f8bd2a68359f2bfb457961f94db97" title="pauses a connection (disables reading) " alt="" coords="2339,400,2509,425"/>
<area shape="rect" id="node12" href="evhtp_8c.html#a3f537cfe43afe795f575e4080d8a4f69" title="Wrapper around evhtp_connection_resume. " alt="" coords="1844,685,2002,710"/>
<area shape="rect" id="node14" href="evhtp_8c.html#a207355af4b2d3e5211c4df0bbb8d195d" title="generates all the right information for a reply to be sent to the client " alt="" coords="1860,836,1986,861"/>
<area shape="rect" id="node13" href="evhtp_8c.html#ac62f0e64aca4fca3648b67042a6c3646" title="resumes a connection (enables reading) and activates resume event. " alt="" coords="2087,582,2265,608"/>
<area shape="rect" id="node15" href="evhtp_8c.html#a0fd9982ade86ed23ee41eadb33b0e3c1" title="_evhtp_create_reply" alt="" coords="2105,836,2247,861"/>
<area shape="rect" id="node30" href="evhtp_8c.html#ad8e05f912c12705d93c0a1aec125544a" title="free&#39;s all connection related resources, this will also call your request fini hook and request fini ..." alt="" coords="2098,268,2254,293"/>
<area shape="rect" id="node37" href="evhtp_8c.html#af0e521e1beb5c171441af8c7170d83b9" title="returns the underlying connections bufferevent " alt="" coords="2086,786,2267,812"/>
<area shape="rect" id="node16" href="evhtp_8c.html#a25a957881c47ce6d3e8b6119d664e9b7" title="_evhtp_create_headers" alt="" coords="2343,782,2505,808"/>
<area shape="rect" id="node17" href="evhtp_8h.html#a8b553a92dea8df3d2a0eb987a8b2cd39" title="finds the value of a key in a evhtp_headers_t structure " alt="" coords="2358,832,2490,857"/>
<area shape="rect" id="node18" href="evhtp_8h.html#a503b047c0137763e0adaf635b7c664a8" title="creates a new evhtp_header_t key/val structure " alt="" coords="2357,1081,2491,1106"/>
<area shape="rect" id="node19" href="evhtp_8h.html#a45e5dd8e1166577254d6da73f4cf9fd1" title="adds an evhtp_header_t to the end of the evhtp_headers_t tailq " alt="" coords="2330,1032,2518,1057"/>
<area shape="rect" id="node20" href="evhtp__numtoa_8c.html#aef81286f525f97a5f761964f50599a63" title="based on the system architecture, convert a size_t number to a string. " alt="" coords="2352,933,2496,958"/>
<area shape="rect" id="node21" href="evhtp__numtoa_8c.html#a8cc234df8a9409d796e9fa426273c218" title="converts uint32_t value to string " alt="" coords="2585,884,2727,909"/>
<area shape="rect" id="node24" href="htparse_8c.html#ab34fb33769128cc477a6f9a5c0e2bc63" title="htparser_get_major" alt="" coords="2355,982,2492,1008"/>
<area shape="rect" id="node25" href="htparse_8c.html#a70e8640f33ccec623fa8e1bdae8c693d" title="htparser_get_minor" alt="" coords="2355,536,2492,561"/>
<area shape="rect" id="node26" href="htparse_8c.html#ad931068e981eb54e6fc99ad7c62f104a" title="htparser_get_multipart" alt="" coords="2347,585,2501,610"/>
<area shape="rect" id="node27" href="htparse_8c.html#a40511e662043f9255ec3ef7376966c31" title="htparser_set_major" alt="" coords="2356,634,2492,660"/>
<area shape="rect" id="node28" href="htparse_8c.html#ab2ee1f6fd7456337e2e483bab9973413" title="htparser_set_minor" alt="" coords="2356,684,2492,709"/>
<area shape="rect" id="node29" href="evhtp_8c.html#ad41c784fc766dd3497fe564a88d7cb1f" title="status_code_to_str" alt="" coords="2357,733,2491,758"/>
<area shape="rect" id="node23" href="evhtp__numtoa_8c.html#a1dae3968a0cdd6586c0ebacf415e929e" title="convert uint64_t value to a string " alt="" coords="2585,933,2727,958"/>
<area shape="rect" id="node22" href="evhtp__numtoa_8c.html#ac884408acf9fb0963fcfcb572bb96fa4" title="strreverse" alt="" coords="2826,909,2906,934"/>
<area shape="rect" id="node31" href="evhtp_8c.html#ae405ab595637e4078a9a01821d3df580" title="runs the user&#45;definedhook called just prior to a connection being closed " alt="" coords="2327,268,2521,293"/>
<area shape="rect" id="node32" href="evhtp_8c.html#ac1b09ba3d872e8a0b93a60805996dae7" title="frees all data in an evhtp_request_t along with calling finished hooks " alt="" coords="2352,193,2496,218"/>
<area shape="rect" id="node33" href="evhtp_8c.html#ab82576a33f5888bec124961eaa86a9c0" title="runs the user&#45;defined hook called just prior to a request been free()&#39;d " alt="" coords="2569,169,2743,194"/>
<area shape="rect" id="node34" href="evhtp_8c.html#a4b730b06fe6a0093afb2f4f391e5455e" title="frees an overlay URI structure " alt="" coords="2599,218,2713,244"/>
<area shape="rect" id="node35" href="evhtp_8c.html#a2dfd994fb181a6efaf2c87716b05cd50" title="frees an authority structure " alt="" coords="2791,244,2941,269"/>
<area shape="rect" id="node36" href="evhtp_8c.html#a9ab2a6de89fce03b9543bdafa6f22db5" title="_evhtp_path_free" alt="" coords="2804,194,2929,220"/>
<area shape="rect" id="node42" href="evhtp_8c.html#a49e7d9a4b613ac689aeffbc6fcd8fbbe" title="bind to an already allocated sockaddr. " alt="" coords="286,558,434,584"/>
<area shape="rect" id="node43" href="evhtp_8c.html#a6f94e792158ac45a66b14ac4b1791215" title="create the listener plus setup various options with an already&#45;bound socket. " alt="" coords="488,457,635,482"/>
<area shape="rect" id="node44" href="evhtp_8c.html#a01058d2a190e93744fcd8b38d3eec6c5" title="_evhtp_accept_cb" alt="" coords="711,457,841,482"/>
<area shape="rect" id="node67" href="evhtp_8c.html#a39edfccc12d96740f98f808a6e180eb7" title="_evhtp_ssl_servername" alt="" coords="694,381,857,406"/>
<area shape="rect" id="node45" href="evhtp_8c.html#a87cc91fb2145c9e78765bfcf6e9ab89e" title="_evhtp_connection_accept" alt="" coords="1110,329,1290,354"/>
<area shape="rect" id="node61" href="evhtp_8c.html#a236b25db880260ea7ade4dbaa3ff8c05" title="_evhtp_connection_new" alt="" coords="1590,422,1756,448"/>
<area shape="rect" id="node63" href="evhtp_8c.html#aa66c50a9faa2ae92643cae6d3aa8298e" title="_evhtp_run_in_thread" alt="" coords="911,381,1062,406"/>
<area shape="rect" id="node64" href="evhtp_8c.html#aff54db2288eb11a543e3a41398bce612" title="_evhtp_run_post_accept" alt="" coords="1116,432,1284,457"/>
<area shape="rect" id="node65" href="evthr_8c.html#ac097120e7644833b8b86891525464414" title="evthr_pool_defer" alt="" coords="926,584,1047,609"/>
<area shape="rect" id="node46" href="evhtp_8c.html#ac1b32dde3c8e0e4ecf7d2350dda47be7" title="_evhtp_connection_eventcb" alt="" coords="1338,278,1525,304"/>
<area shape="rect" id="node49" href="evhtp_8c.html#ae4c1691af1bf2b75cec8d8dce75b0dcb" title="_evhtp_connection_readcb" alt="" coords="1832,116,2014,141"/>
<area shape="rect" id="node54" href="evhtp_8c.html#a342f7eb5f4aade7153b003c18ba0c865" title="_evhtp_connection_writecb" alt="" coords="1581,298,1764,324"/>
<area shape="rect" id="node58" href="evhtp_8c.html#ab451e48a9a9e498641bd754a96c17776" title="_evhtp_connection_resumecb" alt="" coords="1573,217,1773,242"/>
<area shape="rect" id="node59" href="evhtp_8c.html#a587a3e810f454348eefee92b969cb4f5" title="_evhtp_run_pre_accept" alt="" coords="1351,166,1512,192"/>
<area shape="rect" id="node60" href="evhtp_8c.html#a1b44fa89d6169ee0877f7ec9032dd765" title="sets a connection&#45;specific read/write timeout which overrides the global read/write settings..." alt="" coords="1356,216,1507,254"/>
<area shape="rect" id="node47" href="evhtp_8c.html#a08ef8f373dcbe288a099fea5199eb284" title="runs the user&#45;defined hook when a connection error occurs " alt="" coords="2074,16,2279,41"/>
<area shape="rect" id="node48" href="evhtp_8c.html#a90e79ac28720a5a188d8d32a8bc7e609" title="runs the user&#45;defined hook when a connection error occurs " alt="" coords="2357,16,2491,41"/>
<area shape="rect" id="node50" href="htparse_8c.html#a0da49907226999ce1439190bf7fd59c4" title="htparser_get_error" alt="" coords="2110,116,2242,141"/>
<area shape="rect" id="node51" href="htparse_8c.html#a21ab699be5ec818c1118f1c6f4d7b757" title="htparser_run" alt="" coords="2128,66,2225,92"/>
<area shape="rect" id="node52" href="htparse_8c.html#a2f924cee0d1ff942fd92d781879df83c" title="get_method" alt="" coords="2378,65,2470,90"/>
<area shape="rect" id="node53" href="htparse_8c.html#aa905ee8d3cead3af162d637a3a33c397" title="is_host_char" alt="" coords="2375,114,2472,140"/>
<area shape="rect" id="node55" href="evhtp_8c.html#a0fbb88d736802c86bd265560ec15ef18" title="_evhtp_connection_write_hook" alt="" coords="1821,268,2026,293"/>
<area shape="rect" id="node56" href="htparse_8c.html#a7b3e7f5cfd9e769f829bc8d51a200be2" title="htparser_init" alt="" coords="1876,369,1971,394"/>
<area shape="rect" id="node57" href="htparse_8c.html#af22e3761f1ccd029b26c0bcecf8af2f8" title="htparser_set_userdata" alt="" coords="1846,418,2001,444"/>
<area shape="rect" id="node62" href="htparse_8c.html#af88fadfbaf9eaa8081e3495c6cdcdcdb" title="htparser_new" alt="" coords="1872,468,1974,493"/>
<area shape="rect" id="node66" href="evthr_8c.html#a3f09961614cd3efb20100bc540adc78e" title="evthr_defer" alt="" coords="1156,584,1244,609"/>
<area shape="rect" id="node68" href="evhtp_8c.html#aff58378efaf8e86c36ae46c09cb9f67f" title="_evhtp_request_find\l_vhost" alt="" coords="915,137,1058,176"/>
<area shape="rect" id="node69" href="evhtp_8c.html#af5dee122ed5d734715a41e6b7464904c" title="glob/wildcard type pattern matching. " alt="" coords="1131,105,1269,130"/>
<area shape="rect" id="node70" href="evhtp_8c.html#af5cdf9c1d6a11ccdb2e2abb498d7195f" title="_evhtp_glob_match2" alt="" coords="1359,65,1504,90"/>
<area shape="rect" id="node72" href="evhtp_8c.html#a4f47eea3160e177e5fb74f0ded7c4b73" title="_evhtp_default_request_cb" alt="" coords="1582,1010,1764,1036"/>
<area shape="rect" id="node75" href="evhtp_8c.html#a63a90ce1a8d024ab6ecf79055d0aaeac" title="_evhtp_use_threads" alt="" coords="289,924,431,949"/>
<area shape="rect" id="node76" href="evhtp_8c.html#a4d1f9d020c5b0dbc930f3b2dc4cb9c44" title="_evhtp_thread_exit" alt="" coords="494,1034,629,1060"/>
<area shape="rect" id="node77" href="evhtp_8c.html#a8cd75d11eacdb8224357e400c1b2f607" title="_evhtp_thread_init" alt="" coords="496,837,627,862"/>
<area shape="rect" id="node78" href="evhtp_8c.html#a50dcb68a596352bf44b90e507f5f4a04" title="evhtp_ssl_use_threads" alt="" coords="482,886,641,912"/>
<area shape="rect" id="node81" href="evthr_8c.html#afbf9e15cc637731b1bdae6c9f77f202f" title="evthr_pool_start" alt="" coords="503,936,620,961"/>
<area shape="rect" id="node85" href="evthr_8c.html#ae5094de037a6f5475154ad68374dfcfd" title="evthr_pool_wexit_new" alt="" coords="485,985,638,1010"/>
<area shape="rect" id="node79" href="evhtp_8c.html#a7faf23f0dbc80766bca0af285a89751a" title="_evhtp_ssl_get_thread_id" alt="" coords="689,886,863,912"/>
<area shape="rect" id="node80" href="evhtp_8c.html#ab20a3f60ebc232a46f4462f2ff3c17b4" title="_evhtp_ssl_thread_lock" alt="" coords="695,837,857,862"/>
<area shape="rect" id="node82" href="evthr_8c.html#a08fc36209f69a6bf58581c395ca22df0" title="evthr_start" alt="" coords="734,936,818,961"/>
<area shape="rect" id="node83" href="evthr_8c.html#a1023638ec5624538829a1e95b58960b5" title="_evthr_loop" alt="" coords="941,936,1032,961"/>
<area shape="rect" id="node84" href="evthr_8c.html#a7ca698fd31b3842cf9336146d9b55d03" title="_evthr_read_cmd" alt="" coords="1137,936,1263,961"/>
<area shape="rect" id="node86" href="evthr_8c.html#a33070c7bdd9224ffec651c0dc34a8c6b" title="_evthr_pool_new" alt="" coords="714,985,837,1010"/>
<area shape="rect" id="node87" href="evthr_8c.html#a4ef64d9c2456f217908abf0166d0a8a5" title="evthr_pool_free" alt="" coords="929,1034,1043,1060"/>
<area shape="rect" id="node89" href="evthr_8c.html#a45db8d47201add94f3d05768d47ae987" title="evthr_wexit_new" alt="" coords="926,985,1047,1010"/>
<area shape="rect" id="node88" href="evthr_8c.html#a975c0504858edc68ca316a3efc9dde88" title="evthr_free" alt="" coords="1391,1034,1472,1060"/>
<area shape="rect" id="node90" href="evthr_8c.html#ae16815aef6a84311c807965d7dfa4268" title="_evthr_new" alt="" coords="1155,985,1245,1010"/>
<area shape="rect" id="node91" href="evthr_8c.html#aebcc1d7184db421684a620758855de62" title="evthr_set_exitcb" alt="" coords="1372,985,1491,1010"/>
<area shape="rect" id="node92" href="evthr_8c.html#a8d171de75e5fd539ce14ba7e41793568" title="evthr_set_initcb" alt="" coords="1374,936,1489,961"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="thread__design_8c.html">thread_design.c</a></li>
    <li class="footer">Generated on Fri Nov 27 2015 18:37:35 for Libevhtp by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
